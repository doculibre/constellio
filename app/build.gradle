plugins {
    id "fi.jasoft.plugin.vaadin" version '0.11.4'
}

vaadin {

    version '7.7.4'
    addon.title = "constellio"

    widgetset 'com.constellio.app.ui.application.widgetset.AppWidgetset'
    manageWidgetset false

    debug true
    debugPort 8000
    profiler true

    manageRepositories = true
    manageDependencies true

    serverPort 8080

    jvmArgs()

    mainSourceSet sourceSets.main.allJava

    plugin.themesDirectory 'WebContent/VAADIN/themes/constellio'
    plugin.themeAutoRecompile true
    plugin.useClassPathJar true
    plugin.logToConsole = true
}

dependencies {
    compile project(":data")
    compile project(":model")

    compile "org.jsoup:jsoup:1.8.3"
    compile "net.sourceforge.htmlunit:htmlunit:2.18"
    compile "com.cybozu.labs:langdetect:1.1-20120112"
    compile "org.glassfish:javax.json:1.0.4"
    compile "org.glassfish.jersey.media:jersey-media-json-jackson:2.13"
    compile "org.glassfish.jersey.containers:jersey-container-servlet:2.13"
    compile "javax.ws.rs:javax.ws.rs-api:2.0.1"
    compile "org.apache.chemistry.opencmis:chemistry-opencmis-server-bindings:0.12.0"
    compile "org.apache.chemistry.opencmis:chemistry-opencmis-server-support:0.12.0"
    compile "org.jdom:jdom:2.0.2"
    compile "org.apache.poi:poi-ooxml:3.10-FINAL"
    compile "org.apache.poi:poi:3.10-FINAL"
    compile "jspf:jspf.core:1.0.0"
    compile "javax.servlet:javax.servlet-api:3.1.0"
    compile "org.peimari:maddon:1.20"
    compile "commons-io:commons-io:2.4"
    compile "org.apache.solr:solr-solrj:5.0.0"
    compile "org.apache.solr:solr-core:5.0.0"
    compile "org.apache.commons:commons-lang3:3.0"
    compile "org.jboss.spec.javax.servlet:jboss-servlet-api_3.0_spec:1.0.2.Final"
    compile "commons-beanutils:commons-beanutils:1.9.2"
    compile "org.vaadin.addons.lazyquerycontainer:vaadin-lazyquerycontainer:7.6.1.3"
    compile "javax.validation:validation-api:1.0.0.GA";
    compile "org.vaadin.addons:pagedtable:0.6.5"
    compile "org.vaadin.addon:easyuploads:7.3.4"
    compile "org.vaadin.addons:animator:2.0.0"
    compile "org.vaadin.addons:dom:0.1.0"
    compile "org.vaadin.addons:listbuilder:0.7.3.v7"
    compile "org.vaadin.addons:contextmenu:4.5"
    compile "org.vaadin.addons:actionbuttontextfield:1.0.2"
    compile "org.vaadin.addons:googleanalyticstracker:2.1.0"
    compile "org.vaadin.addon:confirmdialog:2.1.2"
    compile "com.vaadin:vaadin-shared:7.7.4"
    compile "com.vaadin:vaadin-client:7.7.4"
    compile "com.vaadin:vaadin-server:7.7.4"
    compile "com.vaadin:vaadin-themes:7.7.4"
    compile "com.vaadin:vaadin-client-compiled:7.7.4"
    compile "vaadin:breadcrumb:1.7.3"
    compile "com.vaadin:vaadin-sass-compiler:0.9.11"
    compile "com.google.code.gson:gson:1.7.2"
    compile "com.sun.messaging.mq:jaxm-api:4.4.1"
    compile "org.vaadin.addons:ckeditor-wrapper-for-vaadin:7.11.0"

    compile "org.samba.jcifs:jcifs_gcm:322"
    compile "vaadin:mediaelementjs-player:1.2.6"
    compile "org.apache.commons:commons-jexl3:3.0"

    //compile "com.vaadin:vaadin-client-compiler:7.7.4"
    //compile files("libs/vaadin-breadcrumb-1.7.3.jar")

    compile "juh:juh:3.2.1"
    compile "jurt:jurt:3.2.1"
    compile "ridl:ridl:3.2.1"
    compile "unoil:unoil:3.2.1"
    compile "org.mockito:mockito-all:1.10.8"
    compile "net.sf.barcode4j:barcode4j:2.1"
    compile "com.jgoodies:jgoodies-common:1.7.0"
    compile "nl.bitwalker:UserAgentUtils:1.2.4"
    compile "org.jasig.cas:cas-client-core:3.1.10"

}

war {
    baseName = "constellio-app"

    webInf {
        from 'WebContent/'
    }

    webAppDirName = 'src/main/webapp/'
}

sourceSets {
    main {
        java {
            srcDir 'src/'
        }
    }
}

eclipse {
    project {
        name = 'app'
        buildCommand 'compileJava'
    }
}


jar {
    from sourceSets.main.allJava
    baseName = 'core-app'
}

configurations.archives.artifacts.with { archives ->
    archives.removeAll {
        it.classifier in ['javadoc', 'sources']
    }
}
