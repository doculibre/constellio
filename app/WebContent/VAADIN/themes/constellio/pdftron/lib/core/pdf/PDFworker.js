(function(a){a.getWasmVersion=function(){return 28}})("undefined"===typeof window?this:window);(function(a){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(a,l){void 0===a&&(a=0);void 0===l&&(l=this.byteLength);a=Math.floor(a);l=Math.floor(l);0>a&&(a+=this.byteLength);0>l&&(l+=this.byteLength);a=Math.min(Math.max(0,a),this.byteLength);l=Math.min(Math.max(0,l),this.byteLength);if(0>=l-a)return new ArrayBuffer(0);var c=new ArrayBuffer(l-a),d=new Uint8Array(c),f=new Uint8Array(this,a,l-a);d.set(f);return c})})(this);(function(a){function g(){for(var b=0;b<y.length;b++)y[b][0](y[b][1]);y=[];z=!1}function l(b,e){y.push([b,e]);z||(z=!0,A(g,0))}function c(b,e){function h(b){k(e,b)}function r(b){m(e,b)}try{b(h,r)}catch(a){r(a)}}function d(b){var e=b.owner,r=e.state_,e=e.data_,a=b[r];b=b.then;if("function"===typeof a){r=h;try{e=a(e)}catch(c){m(b,c)}}f(b,e)||(r===h&&k(b,e),r===x&&m(b,e))}function f(b,e){var h;try{if(b===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&("function"===
typeof e||"object"===typeof e)){var r=e.then;if("function"===typeof r)return r.call(e,function(r){h||(h=!0,e!==r?k(b,r):w(b,r))},function(e){h||(h=!0,m(b,e))}),!0}}catch(a){return h||m(b,a),!0}return!1}function k(b,e){b!==e&&f(b,e)||w(b,e)}function w(e,h){e.state_===b&&(e.state_=r,e.data_=h,l(t,e))}function m(e,h){e.state_===b&&(e.state_=r,e.data_=h,l(v,e))}function u(b){var e=b.then_;b.then_=void 0;for(b=0;b<e.length;b++)d(e[b])}function t(b){b.state_=h;u(b)}function v(b){b.state_=x;u(b)}function p(b){if("function"!==
typeof b)throw new TypeError("Promise constructor takes a function argument");if(!1===this instanceof p)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[];c(b,this)}a.createPromiseCapability=function(){var b={},e=new p(function(e,h){b.resolve=e;b.reject=h});b.promise=e;return b};var q=a.Promise,e=q&&"resolve"in q&&"reject"in q&&"all"in q&&"race"in q&&function(){var b;new q(function(e){b=e});return"function"===
typeof b}();"undefined"!==typeof exports&&exports?(exports.Promise=e?q:p,exports.Polyfill=p):"function"==typeof define&&define.amd?define(function(){return e?q:p}):e||(a.Promise=p);var b="pending",r="sealed",h="fulfilled",x="rejected",n=function(){},A="undefined"!==typeof setImmediate?setImmediate:setTimeout,y=[],z;p.prototype={constructor:p,state_:b,then_:null,data_:void 0,then:function(b,e){var r={owner:this,then:new this.constructor(n),fulfilled:b,rejected:e};this.state_===h||this.state_===x?l(d,
r):this.then_.push(r);return r.then},"catch":function(b){return this.then(null,b)}};p.all=function(b){if("[object Array]"!==Object.prototype.toString.call(b))throw new TypeError("You must pass an array to Promise.all().");return new this(function(e,h){function r(b){c++;return function(h){a[b]=h;--c||e(a)}}for(var a=[],c=0,x=0,n;x<b.length;x++)(n=b[x])&&"function"===typeof n.then?n.then(r(x),h):a[x]=n;c||e(a)})};p.race=function(b){if("[object Array]"!==Object.prototype.toString.call(b))throw new TypeError("You must pass an array to Promise.race().");
return new this(function(e,h){for(var r=0,a;r<b.length;r++)(a=b[r])&&"function"===typeof a.then?a.then(e,h):e(a)})};p.resolve=function(b){return b&&"object"===typeof b&&b.constructor===this?b:new this(function(e){e(b)})};p.reject=function(b){return new this(function(e,h){h(b)})}})("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);(function(a,g){function l(b){"function"!==typeof b&&(b=new Function(""+b));for(var h=Array(arguments.length-1),a=0;a<h.length;a++)h[a]=arguments[a+1];v[t]={callback:b,args:h};e(t);return t++}function c(b){delete v[b]}function d(b){if(p)setTimeout(d,0,b);else{var e=v[b];if(e){p=!0;try{var a=e.callback,n=e.args;switch(n.length){case 0:a();break;case 1:a(n[0]);break;case 2:a(n[0],n[1]);break;case 3:a(n[0],n[1],n[2]);break;default:a.apply(g,n)}}finally{c(b),p=!1}}}}function f(){e=function(b){process.nextTick(function(){d(b)})}}
function k(){if(a.postMessage&&!a.importScripts){var b=!0,e=a.onmessage;a.onmessage=function(){b=!1};a.postMessage("","*");a.onmessage=e;return b}}function w(){var b="setImmediate$"+Math.random()+"$",h=function(e){e.source===a&&"string"===typeof e.data&&0===e.data.indexOf(b)&&d(+e.data.slice(b.length))};a.addEventListener?a.addEventListener("message",h,!1):a.attachEvent("onmessage",h);e=function(e){a.postMessage(b+e,"*")}}function m(){var b=q.documentElement;e=function(e){var a=q.createElement("script");
a.onreadystatechange=function(){d(e);a.onreadystatechange=null;b.removeChild(a);a=null};b.appendChild(a)}}function u(){e=function(b){setTimeout(d,0,b)}}if(!a.setImmediate){var t=1,v={},p=!1,q=a.document,e,b=Object.getPrototypeOf&&Object.getPrototypeOf(a),b=b&&b.setTimeout?b:a;"[object process]"==={}.toString.call(a.process)?f():k()?w():q&&"onreadystatechange"in q.createElement("script")?m():u();b.setImmediate=l;b.clearImmediate=c}})("undefined"===typeof self?"undefined"===typeof global?this:global:
self);(function(a){var g=function(a,c){var d=function(a){a=this["catch"](a);return{cancel:c,promise:a,then:f.bind(a),"catch":d.bind(a)}},f=function(a,l){var g=this.then(a,l);return{cancel:c,promise:g,then:f.bind(g),"catch":d.bind(g)}};return{cancel:c,promise:a,then:f.bind(a),"catch":d.bind(a)}};a.CancellablePromise=function(a,c){var d=!1,f,k=new Promise(function(k,g){f=function(){d||(c(),g("cancelled"))};(new Promise(a)).then(function(a){d=!0;k(a)},function(a){d=!0;g(a)})});return g(k,f)};a.CancellablePromise.all=
function(a){var c=Promise.all(a);return g(c,function(){a.forEach(function(a,c){a.cancel&&a.cancel()})})}})("undefined"===typeof self?this:self);(function(a){a.MessageHandler=function(g,l){this.name=g;this.comObj=l;this.callbackIndex=1;this.postMessageTransfers=!0;this.callbacksCapabilities={};var c=this.actionHandler={};this.actionHandlerAsync={};this.nextAsync=null;c.console_log=[function(a){}];c.console_error=[function(c){a.utils.error(c)}];c.workerLoaded=[function(a){}];l.addEventListener("message",this.handleMessage.bind(this))};a.MessageHandler.prototype={on:function(g,l,c){var d=this.actionHandler;d[g]&&a.utils.error('There is already an actionName called "'+
g+'"');d[g]=[l,c]},replace:function(a,l,c){this.actionHandler[a]=[l,c]},onAsync:function(g,l,c){var d=this.actionHandlerAsync;d[g]&&a.utils.error('There is already an actionName called "'+g+'"');d[g]=[l,c]},replaceAsync:function(a,l,c){var d=this.actionHandlerAsync,f=this.actionHandler;f[a]&&delete f[a];d[a]=[l,c]},onNextAsync:function(a){this.nextAsync=a},send:function(a,l){this.postMessage({action:a,data:l})},getNextId:function(){return this.callbackIndex++},sendWithPromise:function(a,l,c){var d=
this.getNextId();a={action:a,data:l,callbackId:d,priority:c};l=createPromiseCapability();this.callbacksCapabilities[d]=l;try{this.postMessage(a)}catch(f){l.reject(f)}return l.promise},sendWithPromiseReturnId:function(a,l,c){var d=this.getNextId();a={action:a,data:l,callbackId:d,priority:c};l=createPromiseCapability();this.callbacksCapabilities[d]=l;try{this.postMessage(a)}catch(f){l.reject(f)}return{promise:l.promise,callbackId:d}},sendWithPromiseWithId:function(g,l,c,d){l>this.callbackIndex&&a.utils.error("Can't reuse callbackId "+
l+" lesser than callbackIndex "+this.callbackIndex);l in this.callbacksCapabilities&&a.utils.error("Can't reuse callbackId "+l+". There is a capability waiting to be resolved. ");g={action:g,data:c,callbackId:l};c=createPromiseCapability();this.callbacksCapabilities[l]=c;try{this.postMessage(g)}catch(f){c.reject(f)}return c.promise},sendError:function(a,l){if(a.message||a.errorData){a.message&&a.message.message&&(a.message=a.message.message);var c=a.errorData;a={type:a.type?a.type:"JavascriptError",
message:a.message};if(c)for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}this.postMessage({isReply:!0,callbackId:l,error:a})},getPromise:function(g){if(g in this.callbacksCapabilities)return this.callbacksCapabilities[g];a.utils.error("Cannot get promise for callback "+g)},cancelPromise:function(g){if(g in this.callbacksCapabilities){var l=this.callbacksCapabilities[g];delete this.callbacksCapabilities[g];l.reject({type:"Cancelled",message:"Request has been cancelled."});this.postMessage({action:"actionCancel",
data:{callbackId:g}})}else a.utils.warn("Cannot cancel callback "+g)},postMessage:function(a){if(this.postMessageTransfers){var l=this.getTransfersArray(a);this.comObj.postMessage(a,l)}else this.comObj.postMessage(a)},getObjectTransfers:function(a,l){if("object"===typeof a)if(a instanceof Uint8Array)l.push(a.buffer);else if(a instanceof ArrayBuffer)l.push(a);else for(var c in a)a.hasOwnProperty(c)&&this.getObjectTransfers(a[c],l)},getTransfersArray:function(a){var l=[];this.getObjectTransfers(a,l);
return 0===l.length?void 0:l},handleMessage:function(g){var l=this,c=g.data,d=this.actionHandler,f=this.actionHandlerAsync;g=this.callbacksCapabilities;var k;c.isReply?(d=c.callbackId,d in g?(f=g[d],delete g[d],"error"in c?f.reject(c.error):f.resolve(c.data)):a.utils.warn("Cannot resolve callback "+d)):c.action in d?(k=d[c.action],c.callbackId?Promise.resolve().then(function(){return k[0].call(k[1],c.data)}).then(function(a){l.postMessage({isReply:!0,callbackId:c.callbackId,data:a})},function(a){l.sendError(a,
c.callbackId)}):k[0].call(k[1],c.data)):c.action in f?(k=f[c.action],c.callbackId?k[0].call(k[1],c).then(function(a){l.postMessage({isReply:!0,callbackId:c.callbackId,data:a});l.nextAsync()},function(a){l.sendError(a,c.callbackId);l.nextAsync()}):k[0].call(k[1],c).then(function(){l.nextAsync()},function(){l.nextAsync()})):a.utils.error("Unknown action from worker: "+c.action)}}})("undefined"===typeof window?this:window);(function(a){var g=a._trnDebugMode||a._trnLogMode,l=a._logFiltersEnabled?a._logFiltersEnabled:{};a.utils=a.utils?a.utils:{};a.utils.warn=function(a,d){d||(d=a,a="default");g&&l[a]&&console.warn(a+": "+d)};a.utils.log=function(a,d){d||(d=a,a="default");g&&l[a]&&console.log(a+": "+d)};a.utils.error=function(a){g&&console.error(a);throw Error(a);};a.info=function(a,l){};a.warn=function(c,l){a.utils.warn(c,l)};a.error=function(c){a.utils.error(c)}})("undefined"===typeof window?this:window);(function(a){a.Module={TOTAL_MEMORY:50331648,noExitRuntime:!0,devicePixelRatio:1,cur_doc:null,cachePtrSize:0,hasBufOwnership:!0,loaded:!1,initCb:null,cachePtr:null,cleanupState:null,docs:{},postEvent:function(a,l,c){Module.workerMessageHandler.send("event",{docId:a,type:l,data:c})},postPagesUpdatedEvent:function(a,l,c){a={pageDimensions:Module.GetPageDimensions(a)};if(c)for(var d=0;d<c.length;++d)c[d]in a.pageDimensions?a.pageDimensions[c[d]].contentChanged=!0:console.warn("Invalid Page Number "+
c[d]);Module.postEvent(l,"pagesUpdated",a);return a},GetIndividualPageDimensions:function(a,l,c){a=Module.PageGetPageInfo(c);a.id=Module.PageGetId(c);return a},GetPageDimensionsRange:function(a,l,c){for(var d={},f=Module.PDFDocGetPageIterator(a,l);l<c&&Module.IteratorHasNext(f);++l){var k=Module.IteratorCurrent(f);d[l]=this.GetIndividualPageDimensions(a,l,k);Module.IteratorNext(f)}return d},GetPageDimensions:function(a){try{var l=Module.stackSave(),c=Module.GetPageCount(a);if(0===c)throw"This document has no pages.";
return Module.GetPageDimensionsRange(a,1,c+1)}finally{Module.stackRestore(l)}},loadDoc:function(a,l){"undefined"===typeof Module&&this._main();var c=null;try{var d=Module.stackSave();l=Module.CreateDoc(a,l);var f=Module.GetDoc(l);if(Module.PDFDocInitSecurityHandler(f))return{docId:l,pageDimensions:Module.GetPageDimensions(f)};c={type:"NeedsPassword",errorData:{docId:l},message:"This document requires a password"}}catch(k){c={type:"InvalidPDF",message:k}}finally{Module.stackRestore(d)}throw c;},loadCanvas:function(a,
l,c,d,f,k,w,m){return new Promise(function(u,t){var v=Module.GetDoc(a),p=l+1,q=function(){u(Module.RasterizePage(v,p,c,d,k,f,w,m))},e=Module.docs[a].chunkStorage;if(e){var b=Module.GetDownloadData(v).downloader,r=e.getRequiredChunkOffsetArrays(b,p);e.keepChunks(r.have);b=function(){var b=e.getChunks(r.missing);Module.loadPromise=b.then(function(){var b=Module.loadPromise.cancelled;Module.loadPromise=null;b||q()})["catch"](function(b){"cancelled"!==b?t(b):Module.loadPromise=null})};Module.loadPromise?
Module.loadPromise.then(b,b):b()}else q()})},loadResources:function(a,l){Module.Initialize(l);Module._TRN_PDFNetSetDefaultDiskCachingEnabled(!1);var c=new Uint8Array(a);Module.PDFNetSetResourceData(c)},onRuntimeInitialized:function(){"undefined"===typeof Module&&(("undefined"!==typeof window?window:self).Module={});(function(g){g.PDFDocExportXFDF=function(a,c){var d=Module.GetDoc(a),f=Module.stackSave(),k;try{var w;w=c?Module.PDFDocFDFExtract(d,c):Module.PDFDocFDFExtract(d);k=Module.FDFDocSaveAsXFDF(w);
Module.stackRestore(f)}catch(m){throw Module.stackRestore(f),m;}return k};g.PageArrayToPageSet=function(a){var c=Module.stackSave(),d;try{d=Module.PageSetCreate();for(var f=0;f<a.length;++f)Module.PageSetAddPage(d,a[f]);Module.stackRestore(c)}catch(k){throw Module.stackRestore(c),k;}return d};g.cancelCurrent=function(){var a=Module.loadPromise;return a?(a.cancel(),a.cancelled=!0):(a=Module.cleanupState)?(clearImmediate(a.timeout),a.cleanupArr.forEach(function(a){a()}),Module.cleanupState=null,!0):
!1};g.SetWorkerRestartCallback=function(a){Module.workerRestartCallback=a};g.XFDFMerge=function(a,c){if(c){var d=[];try{var f=Module.GetUStringFromJSString(c,!0);d.push(function(){Module.UStringDestroy(f)});var k=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_FDFDocCreateFromXFDF(f,k));var w=Module.getValue(k,"i8*");d.push(function(){Module.FDFDocDestroy(w)});REX(Module._TRN_PDFDocFDFUpdate(a,w))}finally{d.forEach(function(a){a()})}}};g.MergeXFDF=function(a,c){return new Promise(function(d,
f){var k=[];try{var w=Module.stackSave();k[k.length]=function(){Module.stackRestore(w)};var m=Module.GetDoc(a);Module.XFDFMerge(m,c);k.forEach(function(a){a()});d({})}catch(u){k.forEach(function(a){a()}),f(u)}})};g.CreateBufferFile=function(a,c){Module.MakeDev(a);for(var d=new ArrayBuffer(c),d=new Uint8Array(d),f=0;f<c;++f)d[f]=255;Module.docs[a]={buffer:d}};g.ReadBufferFile=function(a,c){var d=Module.docs[a].buffer;if(c){var f=new Uint8Array(d.buffer.slice(0));Module.docs[a].buffer=f}return d};g.RemoveBufferFile=
function(a){Module.docs[a]=null};g.SaveHelper=function(a,c,d){d="undefined"===typeof d?2:d;Module.MakeDev(c);a=Module._TRN_PDFDocSave(a,Module.GetUStringFromJSString(c),d,0);Module.docs[c].sink=null;REX(a);return Module.docs[c].buffer.buffer};g.SaveDoc=function(l,c,d,f,k,w){return new Promise(function(m,u){var g=Module.GetDoc(l),v=[];try{var g=Module.GetDoc(l),p=Module.stackSave();v[v.length]=function(){Module.stackRestore(p)};Module.XFDFMerge(g,c);for(var q=Module.PDFDocGetPageIterator(g,1);Module.IteratorHasNext(q);){var e=
Module.IteratorCurrent(q);try{for(var b=Module.PageGetNumAnnots(e);0<b;){var r=Module.PageGetAnnot(e,--b);Module.AnnotHasAppearance(r)||Module.AnnotRefreshAppearance(r)}}catch(E){Module.ObjErase(e,"Annots")}Module.IteratorNext(q)}if(w){var b=function(b){b=new Uint8Array(b);a.FS.writeFile("watermarkFile",b);b=Module.ImageCreateFromFile(g,Module.GetUStringFromJSString("watermarkFile"));a.FS.unlink("watermarkFile");return b},h=Module.ElementBuilderCreate();v.push(function(){Module.ElementBuilderDestroy(h)});
var x=Module.ElementWriterCreate();v.push(function(){Module.ElementWriterDestroy(x)});try{if(!w.hasOwnProperty("default"))throw Error("Watermark dictionary has no 'default' key!");for(var n=b(w["default"]),q=Module.PDFDocGetPageIterator(g,1),r=-1;Module.IteratorHasNext(q);){e=Module.IteratorCurrent(q);Module.IteratorNext(q);r++;var A=r.toString();try{var y;if(w.hasOwnProperty(A)){var z=w[A];if(z)y=b(z);else continue}else y=n;var B=Module.PageGetPageInfo(e),F=Module.ElementBuilderCreateImage(h,y,0,
0,B.width,B.height);Module.ElementWriterBegin(x,e);Module.ElementWriterWritePlacedElement(x,F);Module.ElementWriterEnd(x)}catch(E){console.warn("Watermark for page "+A+"can not be added due to error: "+E)}}}catch(E){console.warn("Watermarks can not be added due to error: "+E)}}q=0;if(f){var C=Module.PDFDocGetRoot(g);(q=Module.ObjFindObj(C,"OpenAction"))&&Module.ObjPut(C,"__OpenActionBackup__",q);var D=Module.ObjPutDict(C,"OpenAction");Module.ObjPutName(D,"Type","Action");Module.ObjPutName(D,"S","JavaScript");
Module.ObjPutString(D,"JS","this.print()")}var G=Module.SaveHelper(g,l,k);f&&(q?Module.ObjPut(C,"OpenAction",Module.ObjFindObj(C,"__OpenActionBackup__")):Module.ObjErase(C,"OpenAction"));v.forEach(function(b){b()});if(d)m({fileData:G});else{var H=G.slice(0);m({fileData:H})}}catch(E){v.forEach(function(b){b()}),u(E)}})};g.SaveDocFromFixedElements=function(a,c,d){a=Module.PDFDocCreateFromLayoutEls(a);a=Module.CreateDoc({type:"ptr",value:a});return Module.SaveDoc(a,c,!0,!1,d)};g.GetCurrentCanvasData=
function(a){var c=Module.currentRenderData;if(!c)return null;a&&REX(Module._TRN_PDFRasterizerUpdateBuffer(c.rast));Date.now();return{pageBuf:Module.ReadBufferFile("b",a).buffer,pageWidth:c.out_width,pageHeight:c.out_height}};g.RasterizePage=function(a,c,d,f,k,w,m,g){return new Promise(function(t,v){Module.currentRenderData={};var p=Module.currentRenderData;p.out_width=parseInt(d,10);p.out_height=parseInt(f,10);var q=[];q.push(function(){Module.currentRenderData=null});try{var e=Module.stackSave();
q[q.length]=function(){Module.stackRestore(e)};var b=Module.GetPage(a,c),r=Module.PageGetPageWidth(b),h=Module.PageGetPageHeight(b);p.stride=4*p.out_width;p.buf_size=p.out_width*p.out_height*4;p.rast=Module.PDFRasterizerCreate();q.push(function(){Module._TRN_PDFRasterizerDestroy(p.rast)});if(m){var x=Module.EMSCreateUpdatedLayersContext(a,m);0!==x&&(Module._TRN_PDFRasterizerSetOCGContext(p.rast,x),q.push(function(){Module._TRN_OCGContextDestroy(x)}))}var n=Module.PageGetRotation(b),A=1===w||3===w,
n=(1===n||3===n)!==A,y,z=Module.allocate(48,"i8",Module.ALLOC_STACK),B;if(k){k.x1=k[0];k.y1=k[1];k.x2=k[2];k.y2=k[3];var F=Module.PageGetDefaultMatrix(b,0),C=Module.Matrix2DInverse(F);k=Module.Matrix2DMultBBox(C,k);var D;k.x2<k.x1&&(D=k.x1,k.x1=k.x2,k.x2=D);k.y2<k.y1&&(D=k.y1,k.y1=k.y2,k.y2=D);y=p.out_width/(n?k.y2-k.y1:k.x2-k.x1);B=Module.GetDefaultMatrixBox(b,k,w)}else B=Module.PageGetDefaultMatrix(b,w),y=p.out_width/(A?h:r);Module.Matrix2DSet(z,y,0,0,y,0,0);Module.Matrix2DConcat(z,B);q.push(function(){Module._free(p.bufPtr)});
var G=Module.allocate(4,"i8",Module.ALLOC_STACK),H=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PDFRasterizerSetDrawAnnotations(p.rast,0));Module.CreateBufferFile("b",p.buf_size);q.push(function(){Module.RemoveBufferFile("b")});if(10===g){REX(Module._TRN_PDFRasterizerSetOverprint(p.rast,1));var E=Module.PDFRasterizerRasterizeSeparations(p.rast,b,p.out_width,p.out_height,z,0,0);t({pageBuf:E,pageWidth:p.out_width,pageHeight:p.out_height})}else{REX(Module._TRN_PDFRasterizerSetOverprint(p.rast,
g));REX(Module._TRN_PDFRasterizerGetChunkRendererPath(p.rast,b,Module.GetUStringFromJSString("b"),p.out_width,p.out_height,!0,z,0,0,0,G));var J=Module.getValue(G,"i8*");q.splice(1,0,function(){REX(Module._TRN_ChunkRendererDestroy(J))})}(new Date).getTime();var I=function(){try{for(var b=0,e=(new Date).getTime(),a=!1;200>b;){REX(Module._TRN_ChunkRendererRenderNext(J,H));if(!Module.getValue(H,"i8*")){a=!0;break}b=(new Date).getTime()-e}if(a){var h=Module.GetCurrentCanvasData(!1);q.forEach(function(b){b()});
t(h)}else Module.cleanupState.timeout=setImmediate(I,0)}catch(r){q.forEach(function(b){b()}),v(r)}},K=setImmediate(I,0);Module.cleanupState={cleanupArr:q,timeout:K};q.push(function(){Module.cleanupState=null})}catch(L){q.forEach(function(b){b()}),v(L)}})};g.GetDestinationVPosHPos=function(a){var c=0,d=0,f=!1,k=!1,w=Module.DestinationGetPage(a),m=Module.DestinationGetExplicitDestObj(a),w=Module.PageGetDefaultMatrix(w),w=Module.Matrix2DInverse(w),g=Module.Matrix2DMult(w,{x:d,y:c}),d=g.x,c=g.y,t;try{switch(Module.DestinationGetFitType(a)){case 2:case 6:t=
Module.ObjGetAt(m,2);Module.ObjIsNumber(t)&&(c=Module.ObjGetNumber(t),f=!0);break;case 0:t=Module.ObjGetAt(m,2);Module.ObjIsNumber(t)&&(d=Module.ObjGetNumber(t),k=!0);t=Module.ObjGetAt(m,3);Module.ObjIsNumber(t)&&(c=Module.ObjGetNumber(t),f=!0);break;case 4:t=Module.ObjGetAt(m,2);Module.ObjIsNumber(t)&&(d=Module.ObjGetNumber(t),k=!0);t=Module.ObjGetAt(m,5);Module.ObjIsNumber(t)&&(c=Module.ObjGetNumber(t),f=!0);break;case 3:case 7:t=Module.ObjGetAt(m,2),Module.ObjIsNumber(t)&&(d=Module.ObjGetNumber(t),
k=!0)}g=Module.Matrix2DMult(w,{x:d,y:c});d=g.x;c=g.y;f||(c=0);k||(d=0)}catch(v){d=c=0}return{hpos:d,vpos:c}};g.FillBookmarkTree=function(a,c){for(var d=0;Module.BookmarkIsValid(a);a=Module.BookmarkGetNext(a),++d)try{var f=[];if(Module.BookmarkHasChildren(a)){var k=Module.BookmarkGetFirstChild(a);Module.FillBookmarkTree(k,f)}var w=Module.BookmarkGetTitle(a),f={children:f,name:w},m=Module.BookmarkGetAction(a);if(Module.ActionIsValid(m)){var g=Module.ActionGetType(m);if(0===g){var t=Module.ActionGetDest(m);
if(Module.DestinationIsValid(t)){var v=Module.DestinationGetPage(t);if(Module.PageIsValid(v)){var p=Module.PageGetIndex(v);if(0<p){f.pageNumber=p;var q=Module.GetDestinationVPosHPos(t);f.verticalOffset=q.vpos;f.horizontalOffset=q.hpos}}}}else if(5===g){var e=Module.ObjFindObj(m,"URI");e&&(f.url=Module.ObjGetAsPDFText(e))}}c[c.length]=f}catch(b){}};g.LoadBookmarks=function(a){a=Module.GetDoc(a);var c=[],d=Module.stackSave();try{var f=Module.PDFDocGetFirstBookmark(a);Module.BookmarkIsValid(f)&&Module.FillBookmarkTree(f,
c)}catch(k){}Module.stackRestore(d);return{bookmarks:c}};g.UpdatePassword=function(a,c){try{var d=Module.stackSave(),f=Module.GetDoc(a);return Module.PDFDocInitStdSecurityHandler(f,c)?(f in downloadDataMap&&REX(Module._TRN_PDFDocDownloaderInitialize(f,downloadDataMap[f].downloader)),{success:!0,pageDimensions:Module.GetPageDimensions(f)}):{success:!1}}finally{Module.stackRestore(d)}};g.GetTextData=function(a,c){return new Promise(function(d,f){var k=c+1,w=Module.GetDoc(a),m=[];try{var g=Module.stackSave();
m[m.length]=function(){Module.stackRestore(g)};var t=Module.GetPage(w,k),v=Module.allocate(8,"i8",Module.ALLOC_STACK);REX(Module._TRN_TextExtractorCreate(v));var p=Module.getValue(v,"i8*");m[m.length]=function(){Module._TRN_TextExtractorDestroy(p)};REX(Module._TRN_TextExtractorBegin(p,t,0,1));var q=Module.allocate(48,"i8",Module.ALLOC_STACK);REX(Module._TRN_PageGetDefaultMatrix(t,!0,1,0,q));var e=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_TextExtractorGetQuads(p,q,0,e));var b=Module.getValue(e,
"i8*"),r=Module._malloc(8*b);m[m.length]=function(){Module._free(r)};REX(Module._TRN_TextExtractorGetQuads(p,q,r,e));var h=Module.GetJSDoubleArrFromCore(r,b),x=Module.allocate(4,"i8",Module.ALLOC_STACK),n=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_UStringCreate(n));m[m.length]=function(){Module._TRN_UStringDestroy(A)};var A=Module.getValue(n,"i8*");REX(Module._TRN_TextExtractorGetAsTextWithOffsets(p,A,0,x));var y=Module.GetJSStringFromUString(A),z=Module.getValue(x,"i8*"),B=Module._malloc(4*
z);m[m.length]=function(){Module._free(B)};REX(Module._TRN_TextExtractorGetAsTextWithOffsets(p,A,B,x));var F=Module.GetJSIntArrayFromCore(B,z),C=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_TextExtractorCmptSemanticInfo(p,q,0,C));var D=Module.getValue(C,"i8*"),G=Module._malloc(8*D);m[m.length]=function(){Module._free(G)};REX(Module._TRN_TextExtractorCmptSemanticInfo(p,q,G,C));var H=Module.GetJSDoubleArrFromCore(G,D);m.forEach(function(b){b()});d({str:y,quads:h,offsets:F,struct:H})}catch(E){m.forEach(function(b){b()}),
f(E)}})};g.InsertBlankPages=function(a,c,d,f){return new Promise(function(k,w){var m=[],g=Module.GetDoc(a);try{var t=Module.stackSave();m[m.length]=function(){Module.stackRestore(t)};for(var v=c.length-1;0<=v;--v){var p=Module.PDFDocGetPageIterator(g,c[v]),q=Module.PDFDocPageCreate(g,d,f);Module.PDFDocPageInsert(g,p,q)}var e=Module.postPagesUpdatedEvent(g,a);m.forEach(function(b){b()});k(e)}catch(b){m.forEach(function(b){b()}),w(b)}})};g.InsertPages=function(a,c,d,f,k){return new Promise(function(w,
m){var g=[],t=Module.GetDoc(a);try{var v=Module.stackSave();g[g.length]=function(){Module.stackRestore(v)};var p;if(c instanceof ArrayBuffer){var q=Module.CreateDoc(c);p=Module.GetDoc(q);g[g.length]=function(){Module.DeleteDoc(q)}}else p=Module.GetDoc(c);for(var e=d.length,b=Module.PageSetCreate(),r=0;r<e;++r)Module.PageSetAddPage(b,d[r]);Module.PDFDocInsertPages(t,f,p,b,k);var h=Module.postPagesUpdatedEvent(t,a);g.forEach(function(b){b()});w(h)}catch(x){g.forEach(function(b){b()}),m(x)}})};g.MovePages=
function(a,c,d){return new Promise(function(f,k){var g=[],m=Module.GetDoc(a);try{var u=Module.stackSave();g[g.length]=function(){Module.stackRestore(u)};for(var t=c.length,v=Module.PageSetCreate(),p=0;p<t;++p)Module.PageSetAddPage(v,c[p]);Module.PDFDocMovePages(m,d,v);var q=Module.postPagesUpdatedEvent(m,a);g.forEach(function(e){e()});f(q)}catch(e){g.forEach(function(b){b()}),k(e)}})};g.RemovePages=function(a,c){return new Promise(function(d,f){var k=Module.GetDoc(a),g=[];try{var m=Module.stackSave();
g[g.length]=function(){Module.stackRestore(m)};for(var u=c.length-1;0<=u;--u){var t=Module.PDFDocGetPageIterator(k,c[u]);Module.IteratorHasNext(t)&&Module.PDFDocPageRemove(k,t)}var v=Module.postPagesUpdatedEvent(k,a);g.forEach(function(a){a()});d(v)}catch(p){g.forEach(function(a){a()}),f(p)}})};g.RotatePages=function(a,c,d){return new Promise(function(f,k){var g=Module.GetDoc(a),m=[];try{var u=Module.stackSave();m[m.length]=function(){Module.stackRestore(u)};var t=c.length,v=0,p=Module.PDFDocGetPageIterator(g,
c[0]),q=[];m.push(function(){Module._TRN_IteratorDestroy(p)});for(var e=c[0];Module.IteratorHasNext(p)&&v<c[t-1];++e){if(e===c[v]){var b=Module.IteratorCurrent(p),r=(Module.PageGetRotation(b)+d)%4;Module.PageSetRotation(b,r);q.push(e);v++}Module.IteratorNext(p)}var h=Module.postPagesUpdatedEvent(g,a,q);m.forEach(function(b){b()});f(h)}catch(x){m.forEach(function(b){b()}),k(x)}})};g.ExtractPages=function(a,c,d,f){return new Promise(function(k,g){var m=[];try{var u=Module.GetDoc(a),t=Module.stackSave();
m[m.length]=function(){Module.stackRestore(t)};var v=function(e){m.forEach(function(b){b()});g(e)};Module.XFDFMerge(u,d);var p=Module.CreateEmptyDoc();m[m.length]=function(){Module.DeleteDoc(p)};var q=Module.InsertPages(p,a,c,1,!0).then(function(){return Module.SaveDoc(p,void 0,!0,!1,void 0,f)}).then(function(e){m.forEach(function(b){b()});return e})["catch"](v);k(q)}catch(e){v(e)}})};g.CropPages=function(a,c,d,f,k,g){return new Promise(function(m,u){var t=Module.GetDoc(a),v=[];try{var p=Module.stackSave();
v[v.length]=function(){Module.stackRestore(p)};var q=c.length,e=0,b=Module.PDFDocGetPageIterator(t,c[0]);v.push(function(){Module._TRN_IteratorDestroy(b)});for(var r=[],h=c[0];Module.IteratorHasNext(b)&&e<c[q-1];++h){if(h===c[e]){var x=Module.IteratorCurrent(b),n=Module.allocate(8,"i8",Module.ALLOC_STACK);REX(Module._TRN_PageGetCropBox(x,n));var A=Module.PageGetRotation(x),y=Module.getValue(n,"double"),z=Module.getValue(n+8,"double"),B=Module.getValue(n+16,"double"),F=Module.getValue(n+24,"double");
0===A%4?(Module.setValue(n,y+k,"double"),Module.setValue(n+8,z+f,"double"),Module.setValue(n+16,B-g,"double"),Module.setValue(n+24,F-d,"double")):1===A%4?(Module.setValue(n,y+d,"double"),Module.setValue(n+8,z+k,"double"),Module.setValue(n+16,B-f,"double"),Module.setValue(n+24,F-g,"double")):2===A%4?(Module.setValue(n,y+g,"double"),Module.setValue(n+8,z+d,"double"),Module.setValue(n+16,B-k,"double"),Module.setValue(n+24,F-f,"double")):3===A%4&&(Module.setValue(n,y+f,"double"),Module.setValue(n+8,z+
g,"double"),Module.setValue(n+16,B-d,"double"),Module.setValue(n+24,F-k,"double"));Module.setValue(n+32,0,"double");REX(Module._TRN_PageSetBox(x,0,n));REX(Module._TRN_PageSetBox(x,1,n));r.push(h);e++}Module.IteratorNext(b)}var C=Module.postPagesUpdatedEvent(t,a,r);v.forEach(function(b){b()});m(C)}catch(D){v.forEach(function(b){b()}),u(D)}})}})("undefined"===typeof self?this.Module:self.Module);this.loaded=!0;Module.initCb&&Module.initCb()}}})("undefined"===typeof self?this:self);var global="undefined"!==typeof window?window:self;
(function(a){a.currentFileString="/current";var g=0,l=0,c={},d=null;Module.chunkMax=200;var f=function(e,b,a,h,c){var n=new XMLHttpRequest;return CancellablePromise(function(d,f){n.open("GET",e,!0);n.responseType="arraybuffer";n.onerror=function(){f("Network error occurred")};n.onload=function(){if(206===this.status&&n.response.byteLength===a){var b=new Int8Array(n.response);d(b)}else f("Download Failed")};var k=["bytes=",b,"-",b+a-1].join("");n.setRequestHeader("Range",k);c&&(n.withCredentials=c);
if(h)for(var g in h)n.setRequestHeader(g,h[g]);n.send()},function(){n.abort()})},k=function(e){this.file=e;this.position=0;this.length=e.size;this.reader=new FileReaderSync};k.prototype={read:function(e,b,a){a=this.position+a<=this.length?a:this.length-this.position;e=e.subarray(b,b+a);b=new Int8Array(this.reader.readAsArrayBuffer(this.file.slice(this.position,this.position+a)));e.set(b);this.position+=a;return a},seek:function(e){this.position=e},close:function(){this.reader=this.file=null},getPos:function(){return this.position},
getTotalSize:function(){return this.length}};var w=function(e){this.data=e;this.position=0;this.length=this.data.length};w.prototype={read:function(e,b,a){a=this.position+a<=this.length?a:this.length-this.position;e=e.subarray(b,b+a);b=this.data.subarray(this.position,this.position+a);e.set(b);this.position+=a;return a},write:function(e,b,a){a=this.position+a<=this.length?a:this.length-this.position;e=e.subarray(b,b+a);this.data.subarray(this.position,this.position+a).set(e);this.position+=a;return a},
seek:function(e){this.position=e},close:function(){this.data=null},getPos:function(){return this.position},getTotalSize:function(){return this.length}};var m=function(e,b,a,h,c){"object"===typeof e?(this.lruList=e.lruList,this.chunkMap=e.chunkMap,this.length=e.length,this.url=e.url,this.customHeaders=e.customHeaders,this.withCredentials=e.withCredentials):(this.lruList=[],this.chunkMap={},this.chunkMap[b]=c,this.length=b,this.url=e,this.customHeaders=a,this.withCredentials=h)};m.prototype={lruUpdate:function(e){var b=
this.lruList.lastIndexOf(e);0<=b&&this.lruList.splice(b,1);this.lruList.push(e)},getChunk:function(e){if(this.chunkMap[e])this.lruUpdate(e);else{var b=Math.min(e+524288,this.length)-1,a=new XMLHttpRequest;a.open("GET",this.url,!1);a.responseType="arraybuffer";a.setRequestHeader("Range",["bytes=",e,"-",b].join(""));this.withCredentials&&(a.withCredentials=this.withCredentials);if(this.customHeaders)for(var h in this.customHeaders)a.setRequestHeader(h,this.customHeaders[h]);a.send();if(200===a.status||
206===a.status)this.writeChunk(new Int8Array(a.response),e);else throw Error("Failed to load data from");}return this.chunkMap[e]},hadChunk:function(e){return e in this.chunkMap},hasChunk:function(e){return this.chunkMap[e]},getCacheData:function(){return this.chunkMap[this.length]},getRequiredChunkOffsetArrays:function(e,b){var a={have:[],downloading:[],missing:[]};try{var h=Module.stackSave(),c=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_DownloaderGetRequiredChunksSize(e,b,c));var n=
Module.getValue(c,"i8*");if(n){var d=Module._malloc(4*n);REX(Module._TRN_DownloaderGetRequiredChunks(e,b,d,n));for(c=0;c<n;++c){var f=Module.getValue(d+4*c,"i8*");this.hasChunk(f)?a.have.push(f):this.hadChunk(f)?a.missing.push(f):a.downloading.push(f)}}}finally{d&&Module._free(d),Module.stackRestore(h)}return a},keepVisibleChunks:function(e,b){for(var a=b.length,h=Module.chunkMax/2,c=0,n=0;n<a;++n){var d=this.getRequiredChunkOffsetArrays(e,b[n]),f=d.have,k=f.length,c=c+k;if(c>h){this.keepChunks(f.slice(0,
k-c+h));break}this.keepChunks(d.have)}},getChunkAsync:function(e){var b=this,a=e+524288,h=524288;a>this.length&&(h-=a-this.length);return f(this.url,e,h,this.customHeaders,this.withCredentials).then(function(a){b.writeChunk(a,e)})},getChunks:function(e){for(var b=e.length,a=Array(b),h=0;h<b;++h)a[h]=this.getChunkAsync(e[h]);return CancellablePromise.all(a)},keepChunks:function(e){for(var b=e.length,a=0;a<b;++a)this.lruUpdate(e[a])},writeChunk:function(e,b,a){a=a||0;var h=this.chunkMap[b],c=e.length,
n=this.lruList.length>=Module.chunkMax&&!h;524288!==c||e.buffer.byteLength!==c?(n?(h=this.lruList.shift(),n=this.chunkMap[h],524288>n.length&&(n=new Int8Array(524288)),this.chunkMap[h]=null):n=h?this.chunkMap[b]:new Int8Array(524288),n.subarray(a,a+c).set(e),e=n):n&&(h=this.lruList.shift(),this.chunkMap[h]=null);this.lruUpdate(b);this.chunkMap[b]=e}};var u=function(a){this.chunkStorage=a;this.position=0;this.length=this.chunkStorage.length};u.prototype={read:function(a,b,r){var h=this.position+r<=
this.length,c=h?r:this.length-this.position,n,d;if(this.position<this.length){var f;for(f=0;f<c;){d=this.position%524288;var k=this.position-d,g=c-f;if(this.chunkStorage.hadChunk(k))k=this.chunkStorage.getChunk(k),n=a.subarray(b+f,b+f+g),d=k.subarray(d,d+g),n.set(d),d=d.length,f+=d,this.position+=d;else for(this.position+=g;f<c;++f)n[f]=0}}if(!h){n=b+c;if(r-=c)b=this.chunkStorage.getCacheData(),r>b.length&&(r=b.length),h=this.position-this.length,n=a.subarray(n,n+r),d=b.subarray(h,h+r),n.set(d);this.position+=
r;return c+r}return c},write:function(a,b,r){var h=this.position+r<=this.length,c=this.position+r<=this.length?r:this.length-this.position,d=a.subarray(b,b+c),f=this.position%524288;this.chunkStorage.writeChunk(d,this.position-f,f);this.position+=c;if(!h){d=b+c;if(r-=c)b=this.chunkStorage.getCacheData(),r>b.length&&(r=b.length),h=this.position-this.length,d=a.subarray(d,d+r),b.subarray(h,h+r).set(d);this.position+=r;return c+r}return c},seek:function(a){this.position=a},close:function(){this.chunkStorage=
null},getPos:function(){return this.position},getTotalSize:function(){return this.length}};var t=function(a){this.docId=a;this.length=0;this.data=new Int8Array(8192);this.position=0};t.prototype={seek:function(a){this.position=a},close:function(){var a=new Int8Array(this.data.buffer.slice(0,this.length));Module.ChangeDocBackend(this.docId,{ptr:Module.GetDoc(this.docId),buffer:a});this.data=null},getPos:function(){return this.position},getTotalSize:function(){return this.length},read:function(a,b,
r){var h=this.data.length;r=r+b<h?r:h-b;a=a.subarray(b,b+r);b=this.data.subarray(this.position,this.position+r);a.set(b);this.position+=r;return r},write:function(a,b,r){for(var h=this.position+r,c=this.data.length;h>c;){var c=Math.max(c*(16777216<c?1.5:2),h),d=new Int8Array(c);d.set(this.data.subarray(0,this.length),0);this.data=d}a=a.subarray(b,b+r);this.data.set(a,this.position);this.position+=r;this.position>this.length&&(this.length=this.position);return r}};var v={IsSink:function(a){return 66===
(a.flags&255)},open:function(a){var b=a.path.slice(1);this.IsSink(a)?(a.provider=new t(b),Module.docs[b].sink=a.provider):a.provider=Module.docs[b].sink?new w(Module.docs[b].sink.data):Module.docs[b].chunkStorage?new u(Module.docs[b].chunkStorage):Module.docs[b].buffer?new w(Module.docs[b].buffer):new k(Module.docs[b].file)},close:function(a){a.provider.close()},read:function(a,b,c,h,d){return a.provider.read(b,c,h)},llseek:function(a,b,c){a=a.provider;1===c?b+=a.getPos():2===c&&(b=a.getTotalSize()+
b);if(0>b)throw new FS.ErrnoError(global.ERRNO_CODES.EINVAL);a.seek(b);return b},write:function(a,b,c,h,d){return h?a.provider.write(b,c,h):0}};global.THROW=function(a){throw{type:"InvalidPDF",message:a};};global.REX=function(a){a&&THROW(p(a))};var p=function(e){return"Exception: \n\t Message: "+a.GetJSStringFromCString(Module._TRN_GetMessage(e))+"\n\t Filename: "+a.GetJSStringFromCString(Module._TRN_GetFileName(e))+"\n\t Function: "+a.GetJSStringFromCString(Module._TRN_GetFunction(e))+"\n\t Linenumber: "+
a.GetJSStringFromCString(Module._TRN_GetLineNum(e))};a.GetErrToString=p;a.Initialize=function(a){var b=Module.stackSave();a=a?Module.allocate(Module.intArrayFromString(a),"i8",Module.ALLOC_STACK):0;REX(Module._TRN_PDFNetInitialize(a));Module.stackRestore(b)};a.GetDoc=function(a){if(a in Module.docs)return Module.docs[a].ptr;throw{type:"InvalidDocReference",message:"Unable to access Document id="+a+". The document appears to be invalid or was deleted."};};a.clearDocBackend=function(){null!==Module.cachePtr?
(Module.hasBufOwnership&&Module._free(Module.cachePtr),Module.cachePtr=null):Module.docs[a.currentFileString]&&delete Module.docs[a.currentFileString]};a.MakeDev=function(a){if(!c[a]){var b=FS.makedev(3,5);FS.registerDevice(b,v);FS.mkdev(a,511,b);c[a]=!0}};a.CreateDocFileBackend=function(a,b){Module.MakeDev(b);var c=Module.allocate(4,"i8",Module.ALLOC_STACK);Module.docs[b]={file:a};var h=Module.allocate(Module.intArrayFromString(b),"i8",Module.ALLOC_STACK);REX(Module._TRN_PDFDocCreateFromFilePath(h,
c));c=Module.getValue(c,"i8*");Module.docs[b].ptr=c};a.InsertImageIntoDoc=function(a,b,c){var h=[];try{var d=Module.ElementBuilderCreate();h.push(function(){Module.ElementBuilderDestroy(d)});var n=Module.ElementWriterCreate();h.push(function(){Module.ElementWriterDestroy(n)});var f,k;c?(f=c.width,k=c.height):(f=Module.ImageGetImageWidth(b),k=Module.ImageGetImageHeight(b),c=f/k,1<c?(f=612,k=parseInt(f/c,10)):(k=792,f=parseInt(k*c,10)));var g=Module.ElementBuilderCreateImage(d,b,0,0,f,k),v=Module.PDFDocPageCreate(a,
f,k);Module.ElementWriterBegin(n,v);Module.ElementWriterWritePlacedElement(n,g);Module.ElementWriterEnd(n);Module.PDFDocPagePushBack(a,v)}finally{h.forEach(function(b){b()})}};var q=function(a,b,c){"object"===typeof a?(this.m_pages=a.m_pages,this.m_has_named_dests=a.m_has_named_dests,this.m_finished_download=a.m_finished_download,this.m_has_outline=a.m_has_outline,this.m_current_page=a.m_current_page,this.m_id=a.m_id,this.size=a.size,this.timeout=a.timeout,this.eventPageArray=a.eventPageArray,this.requirePageCallbacks=
a.requirePageCallbacks):(this.m_pages=[],this.m_has_outline=this.m_finished_download=this.m_has_named_dests=!1,this.m_current_page=1,this.m_id=c,this.size=a,this.timeout=null,this.eventPageArray=[],this.requirePageCallbacks={});this.downloadUserData=Module.createDownloadUserData(b,c)};q.prototype={getJSUrl:function(){return Module.extractDownloadUserData(this.downloadUserData).url},getDocId:function(){return Module.extractDownloadUserData(this.downloadUserData).docId},destroyUserData:function(){this.m_id in
Module.withCredentials&&delete Module.withCredentials[this.m_id];this.m_id in Module.customHeadersMap&&delete Module.customHeadersMap[this.m_id];Module.destroyDownloadUserData(this.downloadUserData)}};a.createDownloadUserData=function(a,b){var c=Module.allocate(Module.intArrayFromString(a),"i8",Module.ALLOC_NORMAL),h=Module.allocate(8,"i8",Module.ALLOC_NORMAL);Module.setValue(h,c,"i8*");Module.setValue(h+4,parseInt(b,10),"i32");return this.downloadUserData=h};a.extractDownloadUserData=function(e){var b=
Module.getValue(e,"i8*"),b=a.GetJSStringFromCString(b);e=Module.getValue(e+4,"i32").toString();return{url:b,docId:e}};a.destroyDownloadUserData=function(a){Module._free(Module.getValue(a,"i8*"));Module._free(a)};global.downloadDataMap={};Module.customHeadersMap={};Module.withCredentials={};a.GetDownloadData=function(a){if(a in downloadDataMap)return downloadDataMap[a]};a.DownloaderHint=function(a,b){var c=Module.GetDoc(a),h=downloadDataMap[c];b.currentPage&&(h.m_current_page=b.currentPage);if(b.visiblePages){var d=
b.visiblePages,n;for(n=0;n<d.length;++n)++d[n];for(var f in this.requirePageCallbacks)this.requirePageCallbacks.hasOwnProperty(f)&&d.push(parseInt(f,10));(n=Module.docs[a].chunkStorage)&&n.keepVisibleChunks(h.downloader,d);h=d.length;f=Module.allocate(4*h,"i8",Module.ALLOC_STACK);for(n=0;n<h;++n)Module.setValue(f+4*n,d[n],"i32");REX(Module._TRN_PDFDocDownloadPages(c,f,h,1,0))}};a.RequirePage=function(a,b){return new Promise(function(c,h){var d=Module.GetDoc(a),f=downloadDataMap[d];f&&!f.m_pages[b]?
(b in f.requirePageCallbacks?f.requirePageCallbacks[b].push(c):f.requirePageCallbacks[b]=[c],f=Module.allocate(4,"i8",Module.ALLOC_STACK),Module.setValue(f,b,"i32"),Module._TRN_PDFDocDownloadPages(d,f,1,0,0)):c()})};a.IsLinearizationValid=function(a){a=Module.GetDoc(a);if(a=downloadDataMap[a]){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_DownloaderIsLinearizationValid(a.downloader,b));return 0!==Module.getValue(b,"i8")}return!1};a.ShouldRunRender=function(a,b){var c=Module.GetDoc(a);
return(c=downloadDataMap[c])?c.m_pages[b]:!0};a.createCallbacksStruct=function(a){if(!d){var b=function(a){return function(b){var e=arguments;b in downloadDataMap?a.apply(this,e):setImmediate(function(){b in downloadDataMap&&a.apply(this,e)},0)}};d={downloadProc:Module.addFunction(function(a,b,e,c,d){c=Module.extractDownloadUserData(c);var k=c.docId;f(c.url,b,e,Module.customHeadersMap[k],Module.withCredentials[k]).then(function(c){k in Module.docs&&Module.docs[k].chunkStorage&&Module.docs[k].chunkStorage.writeChunk(c,
b);Module._TRN_DownloadComplete(0,b,e,a)})}),notifyUpdatePage:Module.addFunction(b(function(a,b,e,c){var d=downloadDataMap[a];d.m_pages[b]=!0;var f=d.eventPageArray;if(b in d.requirePageCallbacks)for(e=d.requirePageCallbacks[b],c=0;c<e.length;++c)e[c]();d.timeout?f.push(b):(f=d.eventPageArray=[b],d.timeout=setTimeout(function(){Module.postPagesUpdatedEvent(a,d.m_id,f);d.timeout=null},100))})),notifyUpdateOutline:Module.addFunction(b(function(a,b){var e=downloadDataMap[a];e.m_has_outline||(e.m_has_outline=
!0,Module.postEvent(e.m_id,"bookmarksUpdated",{}))})),notifyUpdateNamedDests:Module.addFunction(b(function(a,b){var e=downloadDataMap[a];e.m_has_named_dests||(e.m_has_named_dests=!0)})),notifyUpdateThumb:Module.addFunction(b(function(a,b){})),notifyFinishedDownload:Module.addFunction(b(function(a,b){var e=downloadDataMap[a];e.m_finished_download||(e.m_finished_download=!0,Module.postEvent(e.m_id,"documentComplete",{}))})),notifyDocumentError:Module.addFunction(function(a,b){}),getCurrentPage:Module.addFunction(function(a,
b){return downloadDataMap[a].m_current_page})}}b=Module.allocate(40,"i8",Module.ALLOC_STACK);Module.setValue(b,d.downloadProc,"i8*");Module.setValue(b+4,a,"i8*");Module.setValue(b+8,d.notifyUpdatePage,"i8*");Module.setValue(b+12,d.notifyUpdateOutline,"i8*");Module.setValue(b+16,d.notifyUpdateNamedDests,"i8*");Module.setValue(b+20,d.notifyUpdateThumb,"i8*");Module.setValue(b+24,d.notifyFinishedDownload,"i8*");Module.setValue(b+28,d.notifyDocumentError,"i8*");Module.setValue(b+32,d.getCurrentPage,"i8*");
Module.setValue(b+36,0,"i8*");return b};a.CreateDocDownloaderBackend=function(a,b,c){var h=a.url,d=a.size,f=a.customHeaders,k=a.withCredentials;f&&(Module.customHeadersMap[c]=f);k&&(Module.withCredentials[c]=k);var g;g=a.downloadData?new q(a.downloadData,h,c,f,k):new q(a.size,h,c,f,k);var v=Module.createCallbacksStruct(g.downloadUserData),l=Module.allocate(4,"i8",Module.ALLOC_STACK);Module.MakeDev(c);a.chunkStorage?h=new m(a.chunkStorage):(a=new Int8Array(new ArrayBuffer(Math.ceil((a.size+524288-
1)/524288/8))),h=new m(h,d,f,k,a));Module.docs[c]={chunkStorage:h};REX(Module._TRN_DownloaderCreate(v,d,Module.GetUStringFromJSString(c),l));g.downloader=Module.getValue(l,"i8*");if(d=Module._TRN_PDFDocCreateFromFilter(g.downloader,b))Module._TRN_FilterDestroy(g.downloader),REX(d);b=Module.getValue(b,"i8*");Module.docs[c].ptr=b;Module.PDFDocInitSecurityHandler(b)&&REX(Module._TRN_PDFDocDownloaderInitialize(b,g.downloader));downloadDataMap[b]=g};a.CreateDocBackend=function(e,b){var c=e.value,h=e.extension,
d=e.type,f=Module.allocate(4,"i8",Module.ALLOC_STACK),k=Module.stackSave();try{if(c)if("ptr"===d)Module.docs[b]={ptr:c};else{var v,d=h&&"pdf"!==h;if("object"===typeof c&&c.url)a.CreateDocDownloaderBackend(c,f,b);else{var l=c instanceof ArrayBuffer,m=l?"buffer":"file";if(l&&(c=new Uint8Array(c),10485760>c.length+g&&!d)){g+=c.length;var p=c.length,w=Module._malloc(c.length);Module.HEAPU8.set(c,w);REX(Module._TRN_PDFDocCreateFromBuffer(w,p,f));v=Module.getValue(f,"i8*");Module.docs[b]={ptr:v,bufPtr:w,
bufPtrSize:p,ownership:!0};Module.docs[b].extension=h;return}Module.MakeDev(b);l={};l[m]=c;Module.docs[b]=l;if(d){var q;e.pageSizes&&e.pageSizes.length?q=e.pageSizes[0]:e.defaultPageSize&&(q=e.defaultPageSize);var t=Module.GetUStringFromJSString(b);REX(Module._TRN_PDFDocCreate(f));v=Module.getValue(f,"i8*");var u=Module.ImageCreateFromFile(v,t);Module.InsertImageIntoDoc(v,u,q)}else{var E=Module.allocate(Module.intArrayFromString(b),"i8",Module.ALLOC_STACK);REX(Module._TRN_PDFDocCreateFromFilePath(E,
f));v=Module.getValue(f,"i8*")}Module.docs[b].extension=h;Module.docs[b].ptr=v}}else REX(Module._TRN_PDFDocCreate(f)),v=Module.getValue(f,"i8*"),Module.docs[b]={ptr:v},Module.docs[b].extension=h}finally{Module.stackRestore(k)}};a.ChangeDocBackend=function(e,b){var c=Module.docs[e];c?(c.bufPtr&&c.ownership&&(Module._free(c.bufPtr),g-=c.bufPtrSize),delete Module.docs[e]):a.utils.warn("Trying to delete document "+e+" that does not exist.");Module.docs[e]=b};a.DeleteDoc=function(e){var b=Module.docs[e];
b?(b.ptr&&(b.ptr in downloadDataMap&&(clearTimeout(downloadDataMap[b.ptr].timeout),downloadDataMap[b.ptr].destroyUserData(),delete downloadDataMap[b.ptr]),Module.PDFDocDestroy(b.ptr)),b.bufPtr&&b.ownership&&(Module._free(b.bufPtr),g-=b.bufPtrSize),delete Module.docs[e]):a.utils.warn("Trying to delete document "+e+" that does not exist.")};a.CreateDoc=function(e,b){if("id"===e.type)return Module.docPtrStringToIdMap[e.value];if(!b){do b=(++l).toString();while(b in Module.docs)}Module.hasBufOwnership=
!0;a.CreateDocBackend(e,b);return b};a.CreateEmptyDoc=function(){var a=(++l).toString(),b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PDFDocCreate(b));b=Module.getValue(b,"i8*");Module.docs[a]={ptr:b};return a};a.PDFDocCreateFromLayoutEls=function(a){var b=new Uint8Array(a);a=Module._malloc(b.length);var c=Module.stackSave(),h=Module.allocate(4,"i8",Module.ALLOC_STACK);Module.HEAPU8.set(b,a);b=Module._TRN_PDFDocCreateFromLayoutEls(a,b.length,h);h=Module.getValue(h,"i8*");Module._free(a);
Module.stackRestore(c);REX(b);return h};a.GetPageCount=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PDFDocGetPageCount(a,b));return Module.getValue(b,"i8*")};a.GetPage=function(a,b){var c=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PDFDocGetPage(a,b,c));c=Module.getValue(c,"i8*");Module.PageIsValid(c)||THROW("Trying to access page that doesn't exist at index "+b);return c};a.PageGetPageWidth=function(a){var b=Module.allocate(8,"i8",Module.ALLOC_STACK);
REX(Module._TRN_PageGetPageWidth(a,1,b));return Module.getValue(b,"double")};a.PageGetPageHeight=function(a){var b=Module.allocate(8,"i8",Module.ALLOC_STACK);REX(Module._TRN_PageGetPageHeight(a,1,b));return Module.getValue(b,"double")};a.PageGetDefaultMatrix=function(a,b){var c=Module.allocate(48,"i8",Module.ALLOC_STACK);b||(b=0);REX(Module._TRN_PageGetDefaultMatrix(a,!0,1,b,c));return c};a.GetMatrixAsArray=function(a){for(var b=[],c=0;6>c;++c)b[c]=Module.getValue(a+8*c,"double");return b};a.PageGetPageInfo=
function(a){var b=Module.allocate(48,"i8",Module.ALLOC_STACK),c=Module.allocate(8,"i8",Module.ALLOC_STACK),h=Module.allocate(8,"i8",Module.ALLOC_STACK),d=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PageGetPageInfo(a,!0,1,0,c,h,b,d));return{rotation:Module.getValue(d,"i8*"),width:Module.getValue(c,"double"),height:Module.getValue(h,"double"),matrix:Module.GetMatrixAsArray(b)}};a.GetUStringFromJSString=function(a,b){var c=Module.allocate(4,"i8",Module.ALLOC_STACK),h=2*(a.length+1),d=
Module.allocate(h,"i8",b?Module.ALLOC_NORMAL:Module.ALLOC_STACK);Module.stringToUTF16(a,d,h);h=Module._TRN_UStringCreateFromString(d,c);b&&Module._free(d);REX(h);return Module.getValue(c,"i8*")};a.GetJSStringFromUString=function(a){var b=Module.allocate(4,"i16*",Module.ALLOC_STACK);REX(Module._TRN_UStringCStr(a,b));return Module.UTF16ToString(Module.getValue(b,"i16*"))};a.GetJSStringFromCString=function(a){return Module.UTF8ToString(a)};a.PDFNetSetResourceData=function(a){Module.res_ptr=Module._malloc(a.length);
Module.HEAPU8.set(a,Module.res_ptr);REX(Module._TRN_PDFNetSetResourceData(Module.res_ptr,a.length));Module.res_ptr_size=a.length};a.PDFDocDestroy=function(a){REX(Module._TRN_PDFDocDestroy(a))};a.VectorGetSize=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_VectorGetSize(a,b));return Module.getValue(b,"i32")};a.VectorGetAt=function(a,b){var c=Module.allocate(1,"i8*",Module.ALLOC_STACK);REX(Module._TRN_VectorGetAt(a,b,c));return Module.getValue(c,"i8*")};a.VectorDestroy=
function(a){REX(Module._TRN_VectorDestroy(a))};a.PDFRasterizerCreate=function(){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PDFRasterizerCreate(0,a));return Module.getValue(a,"i8*")};a.ExtractSeparationData=function(a){var b=Module.getValue(a,"i8*"),c=Module.getValue(a+4,"i32"),h=Module.getValue(a+8,"i8*"),d=Module.HEAPU8[a+12],f=Module.HEAPU8[a+13],k=Module.HEAPU8[a+14];a=Module.HEAPU8[a+15];var g=new Uint8Array(c);g.set(Module.HEAPU8.subarray(b,b+c));b=Module.GetJSStringFromUString(h);
return{color:[d,f,k,a],data:g.buffer,name:b}};a.PDFRasterizerRasterizeSeparations=function(a,b,c,h,d,f,k){var g=Module.allocate(8,"i8",Module.ALLOC_STACK);REX(Module._TRN_PDFRasterizerRasterizeSeparations(a,b,c,h,d,f,k,g));a=Module.VectorGetSize(g);b=Array(a);for(c=0;c<a;++c)h=Module.VectorGetAt(g,c),b[c]=Module.ExtractSeparationData(h);Module.VectorDestroy(g);return b};a.PageGetRotation=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PageGetRotation(a,b));return Module.getValue(b,
"i8*")};a.PageGetId=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PageGetSDFObj(a,b));b=Module.getValue(b,"i8*");a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_ObjGetObjNum(b,a));a=Module.getValue(a,"i32");var c=Module.allocate(2,"i8",Module.ALLOC_STACK);REX(Module._TRN_ObjGetGenNum(b,c));c=Module.getValue(c,"i16");return a+"-"+c};a.PageSetRotation=function(a,b){REX(Module._TRN_PageSetRotation(a,b))};a.GetDefaultMatrixBox=function(a,b,c){var h=Module.allocate(4,
"i8",Module.ALLOC_STACK);REX(Module._TRN_PageGetRotation(a,h));a=(Module.getValue(h,"i32")+c)%4;c=Module.allocate(48,"i8",Module.ALLOC_STACK);switch(a){case 0:return REX(Module._TRN_Matrix2DSet(c,1,0,0,-1,-b.x1,b.y2)),c;case 1:return REX(Module._TRN_Matrix2DSet(c,0,1,1,0,-b.y1,-b.x1)),c;case 2:return REX(Module._TRN_Matrix2DSet(c,-1,0,0,1,b.x2,-b.y1)),c;case 3:return REX(Module._TRN_Matrix2DSet(c,0,-1,-1,0,b.y2,b.x2)),c}throw Error("Yikes, we don't support that rotation type");};a.Matrix2DMultBBox=
function(a,b){var c=Module.allocate(8,"i8",Module.ALLOC_STACK),h=Module.allocate(8,"i8",Module.ALLOC_STACK);Module.setValue(c,b.x1,"double");Module.setValue(h,b.y1,"double");REX(Module._TRN_Matrix2DMult(a,c,h));b.x1=Module.getValue(c,"double");b.y1=Module.getValue(h,"double");Module.setValue(c,b.x2,"double");Module.setValue(h,b.y2,"double");REX(Module._TRN_Matrix2DMult(a,c,h));b.x2=Module.getValue(c,"double");b.y2=Module.getValue(h,"double");return b};a.Matrix2DMult=function(a,b){var c=Module.allocate(8,
"i8",Module.ALLOC_STACK),h=Module.allocate(8,"i8",Module.ALLOC_STACK);Module.setValue(c,b.x,"double");Module.setValue(h,b.y,"double");REX(Module._TRN_Matrix2DMult(a,c,h));b.x=Module.getValue(c,"double");b.y=Module.getValue(h,"double");return b};a.Matrix2DConcat=function(a,b){var c=Module.getValue(b,"double"),h=Module.getValue(b+8,"double"),d=Module.getValue(b+16,"double"),f=Module.getValue(b+24,"double"),k=Module.getValue(b+32,"double"),g=Module.getValue(b+40,"double");REX(Module._TRN_Matrix2DConcat(a,
c,h,d,f,k,g))};a.Matrix2DSet=function(a,b,c,h,d,f,k){REX(Module._TRN_Matrix2DSet(a,b,c,h,d,f,k))};a.IteratorHasNext=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_IteratorHasNext(a,b));return 0!==Module.getValue(b,"i8")};a.IteratorCurrent=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_IteratorCurrent(a,b));return Module.getValue(Module.getValue(b,"i8*"),"i8*")};a.IteratorNext=function(a){REX(Module._TRN_IteratorNext(a))};a.PageGetNumAnnots=
function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PageGetNumAnnots(a,b));return Module.getValue(b,"i32")};a.PageGetAnnot=function(a,b){var c=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PageGetAnnot(a,b,c));return Module.getValue(c,"i8*")};a.PageAnnotRemove=function(a,b){REX(Module._TRN_PageAnnotRemoveByIndex(a,b))};a.AnnotGetType=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_AnnotGetType(a,b));return Module.getValue(b,"i32")};
a.AnnotHasAppearance=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_AnnotGetAppearance(a,0,0,b));return 0!==Module.getValue(b,"i8*")};a.AnnotRefreshAppearance=function(a){REX(Module._TRN_AnnotRefreshAppearance(a))};a.ObjErase=function(a,b){var c=Module.allocate(Module.intArrayFromString(b),"i8",Module.ALLOC_STACK);REX(Module._TRN_ObjEraseFromKey(a,c))};a.GetJSDoubleArrFromCore=function(a,b){for(var c=Array(b),h=a,d=0;d<b;++d)c[d]=Module.getValue(h,"double"),h+=8;return c};
a.GetJSIntArrayFromCore=function(a,b){for(var c=Array(b),h=a,d=0;d<b;++d)c[d]=Module.getValue(h,"i32"),h+=4;return c};a.BookmarkIsValid=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_BookmarkIsValid(a,b));return 0!==Module.getValue(b,"i8")};a.BookmarkGetNext=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_BookmarkGetNext(a,b));return Module.getValue(b,"i8*")};a.BookmarkGetFirstChild=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);
REX(Module._TRN_BookmarkGetFirstChild(a,b));return Module.getValue(b,"i8*")};a.BookmarkHasChildren=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_BookmarkHasChildren(a,b));return 0!==Module.getValue(b,"i8")};a.BookmarkGetAction=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_BookmarkGetAction(a,b));return Module.getValue(b,"i8*")};a.BookmarkGetTitle=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_BookmarkGetTitle(a,
b));a=Module.getValue(b,"i8*");return Module.GetJSStringFromUString(a)};a.ActionIsValid=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_ActionIsValid(a,b));return 0!==Module.getValue(b,"i8")};a.ActionGetType=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_ActionGetType(a,b));return Module.getValue(b,"i32")};a.ActionGetDest=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_ActionGetDest(a,b));return Module.getValue(b,
"i8*")};a.DestinationIsValid=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_DestinationIsValid(a,b));return 0!==Module.getValue(b,"i8")};a.DestinationGetPage=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_DestinationGetPage(a,b));return Module.getValue(b,"i8*")};a.PageIsValid=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PageIsValid(a,b));return 0!==Module.getValue(b,"i8")};a.PageGetIndex=function(a){var b=
Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PageGetIndex(a,b));return Module.getValue(b,"i32")};a.ObjGetAsPDFText=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_ObjGetAsPDFText(a,b));a=Module.getValue(b,"i8*");return Module.GetJSStringFromUString(a)};a.ObjFindObj=function(a,b){var c=Module.allocate(4,"i8",Module.ALLOC_STACK),h=Module.allocate(Module.intArrayFromString(b),"i8",Module.ALLOC_STACK);REX(Module._TRN_ObjFindObj(a,h,c));return Module.getValue(c,
"i8*")};a.PDFDocGetFirstBookmark=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PDFDocGetFirstBookmark(a,b));return Module.getValue(b,"i8*")};a.DestinationGetExplicitDestObj=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_DestinationGetExplicitDestObj(a,b));return Module.getValue(b,"i8*")};a.DestinationGetFitType=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_DestinationGetFitType(a,b));return Module.getValue(b,
"i32")};a.ObjIsNumber=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_ObjIsNumber(a,b));return 0!==Module.getValue(b,"i8")};a.ObjGetNumber=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_ObjGetNumber(a,b));return Module.getValue(b,"double")};a.PDFDocGetRoot=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PDFDocGetRoot(a,b));return Module.getValue(b,"i8*")};a.ObjPutName=function(a,b,c){b=Module.allocate(Module.intArrayFromString(b),
"i8",Module.ALLOC_STACK);c=Module.allocate(Module.intArrayFromString(c),"i8",Module.ALLOC_STACK);var h=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_ObjPutName(a,b,c,h));return Module.getValue(h,"i8*")};a.ObjPutDict=function(a,b){var c=Module.allocate(Module.intArrayFromString(b),"i8",Module.ALLOC_STACK),h=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_ObjPutDict(a,c,h));return Module.getValue(h,"i8*")};a.ObjPutString=function(a,b,c){b=Module.allocate(Module.intArrayFromString(b),
"i8",Module.ALLOC_STACK);c=Module.allocate(Module.intArrayFromString(c),"i8",Module.ALLOC_STACK);var h=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_ObjPutString(a,b,c,h));return Module.getValue(h,"i8*")};a.ObjPut=function(a,b,c){b=Module.allocate(Module.intArrayFromString(b),"i8",Module.ALLOC_STACK);var h=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_ObjPut(a,b,c,h));return Module.getValue(h,"i8*")};a.ObjGetAt=function(a,b){var c=Module.allocate(4,"i8",Module.ALLOC_STACK);
REX(Module._TRN_ObjGetAt(a,b,c));return Module.getValue(c,"i8*")};a.Matrix2DInverse=function(a){var b=Module.allocate(48,"i8",Module.ALLOC_STACK);REX(Module._TRN_Matrix2DInverse(a,b));return b};a.PDFDocInitSecurityHandler=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PDFDocInitSecurityHandler(a,0,b));return 0!==Module.getValue(b,"i8")};a.PDFDocInitStdSecurityHandler=function(a,b){var c=Module.allocate(4,"i8",Module.ALLOC_STACK),h=Module.intArrayFromString(b),d=Module.allocate(h,
"i8",Module.ALLOC_STACK);REX(Module._TRN_PDFDocInitStdSecurityHandler(a,d,h.length-1,c));return 0!==Module.getValue(c,"i8")};a.PDFDocInsertPages=function(a,b,c,h,d){REX(Module._TRN_PDFDocInsertPageSet(a,b,c,h,d?1:0,0))};a.PDFDocMovePages=function(a,b,c){REX(Module._TRN_PDFDocMovePageSet(a,b,a,c,0,0))};a.PDFDocGetPageIterator=function(a,b){var c=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PDFDocGetPageIterator(a,b,c));return Module.getValue(c,"i8*")};a.PDFDocPageRemove=function(a,b){REX(Module._TRN_PDFDocPageRemove(a,
b))};a.PDFDocPageCreate=function(a,b,c){var h=Module.allocate(40,"i8",Module.ALLOC_STACK);Module.setValue(h,0,"double");Module.setValue(h+8,0,"double");Module.setValue(h+16,b,"double");Module.setValue(h+24,c,"double");Module.setValue(h+32,0,"double");b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PDFDocPageCreate(a,h,b));return Module.getValue(b,"i8*")};a.PDFDocPageInsert=function(a,b,c){REX(Module._TRN_PDFDocPageInsert(a,b,c))};a.PageSetCreate=function(){var a=Module.allocate(4,"i8",
Module.ALLOC_STACK);REX(Module._TRN_PageSetCreate(a));return Module.getValue(a,"i8*")};a.PageSetCreateRange=function(a,b){var c=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PageSetCreateRange(c,a,b));return Module.getValue(c,"i8*")};a.PageSetAddPage=function(a,b){REX(Module._TRN_PageSetAddPage(a,b))};a.ElementBuilderCreate=function(){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_ElementBuilderCreate(a));return Module.getValue(a,"i8*")};a.ElementBuilderDestroy=function(a){REX(Module._TRN_ElementBuilderDestroy(a))};
a.ElementBuilderCreateImage=function(a,b,c,h,d,f){var k=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_ElementBuilderCreateImageScaled(a,b,c,h,d,f,k));return Module.getValue(k,"i8*")};a.ElementWriterCreate=function(){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_ElementWriterCreate(a));return Module.getValue(a,"i8*")};a.ElementWriterDestroy=function(a){REX(Module._TRN_ElementWriterDestroy(a))};a.ElementWriterBegin=function(a,b){REX(Module._TRN_ElementWriterBeginOnPage(a,
b,1))};a.ElementWriterWritePlacedElement=function(a,b){REX(Module._TRN_ElementWriterWritePlacedElement(a,b))};a.ElementWriterEnd=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_ElementWriterEnd(a,b))};a.ImageGetImageWidth=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_ImageGetImageWidth(a,b));return Module.getValue(b,"i32")};a.ImageGetImageHeight=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_ImageGetImageHeight(a,
b));return Module.getValue(b,"i32")};a.ImageCreateFromMemory2=function(a,b,c){var h=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_ImageCreateFromMemory2(a,b,c,0,h));return Module.getValue(h,"i8*")};a.ImageCreateFromFile=function(a,b){var c=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_ImageCreateFromFile(a,b,0,c));return Module.getValue(c,"i8*")};a.PDFDocPagePushBack=function(a,b){REX(Module._TRN_PDFDocPagePushBack(a,b))};a.PDFDocHasOC=function(a){var b=Module.allocate(4,
"i8",Module.ALLOC_STACK);REX(Module._TRN_PDFDocHasOC(a,b));return 0!==Module.getValue(b,"i8")};a.PDFDocGetOCGConfig=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PDFDocGetOCGConfig(a,b));return Module.getValue(b,"i8*")};a.OCGContextCreate=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_OCGContextCreateFromConfig(a,b));return Module.getValue(b,"i8*")};a.UStringDestroy=function(a){REX(Module._TRN_UStringDestroy(a))};a.FDFDocDestroy=function(a){REX(Module._TRN_FDFDocDestroy(a))}})(global.Module);!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var g;"undefined"!=typeof window?g=window:"undefined"!=typeof global?g=global:"undefined"!=typeof self&&(g=self);g.PriorityQueue=a()}}(function(){return function g(l,c,d){function f(m,w){if(!c[m]){if(!l[m]){var t="function"==typeof require&&require;if(!w&&t)return t(m,!0);if(k)return k(m,!0);t=Error("Cannot find module '"+m+"'");throw t.code="MODULE_NOT_FOUND",
t;}t=c[m]={exports:{}};l[m][0].call(t.exports,function(c){var d=l[m][1][c];return f(d?d:c)},t,t.exports,g,l,c,d)}return c[m].exports}for(var k="function"==typeof require&&require,w=0;w<d.length;w++)f(d[w]);return f}({1:[function(g,l,c){var d={}.hasOwnProperty,f=function(c,f){function g(){this.constructor=c}for(var l in f)d.call(f,l)&&(c[l]=f[l]);g.prototype=f.prototype;c.prototype=new g;c.__super__=f.prototype;return c};c=g("./PriorityQueue/AbstractPriorityQueue");g=g("./PriorityQueue/ArrayStrategy");
c=function(c){function d(c){c||(c={});c.strategy||(c.strategy=BinaryHeapStrategy);c.comparator||(c.comparator=function(c,d){return(c||0)-(d||0)});d.__super__.constructor.call(this,c)}f(d,c);return d}(c);c.ArrayStrategy=g;l.exports=c},{"./PriorityQueue/AbstractPriorityQueue":2,"./PriorityQueue/ArrayStrategy":3}],2:[function(g,l,c){l.exports=function(){function c(d){if(null==(null!=d?d.strategy:void 0))throw"Must pass options.strategy, a strategy";if(null==(null!=d?d.comparator:void 0))throw"Must pass options.comparator, a comparator";
this.priv=new d.strategy(d);this.length=0}c.prototype.queue=function(c){this.length++;this.priv.queue(c)};c.prototype.dequeue=function(c){if(!this.length)throw"Empty queue";this.length--;return this.priv.dequeue()};c.prototype.peek=function(c){if(!this.length)throw"Empty queue";return this.priv.peek()};c.prototype.remove=function(c){this.priv.remove(c)&&--this.length};c.prototype.find=function(c){return 0<=this.priv.find(c)};c.prototype.removeAllMatching=function(c,d){var g=this.priv.removeAllMatching(c,
d);this.length-=g};return c}()},{}],3:[function(g,l,c){var d;d=function(c,d,g){var l,u,t;u=0;for(l=c.length;u<l;)t=u+l>>>1,0<=g(c[t],d)?u=t+1:l=t;return u};l.exports=function(){function c(d){var f;this.options=d;this.comparator=this.options.comparator;this.data=(null!=(f=this.options.initialValues)?f.slice(0):void 0)||[];this.data.sort(this.comparator).reverse()}c.prototype.queue=function(c){var f;f=d(this.data,c,this.comparator);this.data.splice(f,0,c)};c.prototype.dequeue=function(){return this.data.pop()};
c.prototype.peek=function(){return this.data[this.data.length-1]};c.prototype.find=function(c){var f=d(this.data,c,this.comparator)-1;return 0<=f&&!this.comparator(this.data[f],c)?f:-1};c.prototype.remove=function(c){c=this.find(c);return 0<=c?(this.data.splice(c,1),!0):!1};c.prototype.removeAllMatching=function(c,d){for(var f=0,g=this.data.length-1;0<=g;--g)if(c(this.data[g])){var l=this.data.splice(g,1)[0];d&&d(l);++f}return f};return c}()},{}]},{},[1])(1)});(function(a){a.SetupPDFNetFunctions=function(g){Module._IB_=[];for(var l=function(a){if("object"===typeof a&&null!==a)if("undefined"!==typeof a.byteLength){var c=Module._IB_.length;Module._IB_[c]=new Uint8Array(a);a={handle:c,isArrayBufferRef:!0}}else for(prop in a)a.hasOwnProperty(prop)&&(a[prop]=l(a[prop]));return a},c=function(a){if("object"===typeof a&&null!==a)if(a.buffer)a=a.buffer.slice(a.byteOffset,a.byteOffset+a.length);else if(a.isArrayBufferRef)a=Module._IB_[a.handle].buffer;else for(prop in a)a.hasOwnProperty(prop)&&
(a[prop]=c(a[prop]));return a},d=Module._TRN_EMSCreateSharedWorkerInstance(),f,k=Module._TRN_EMSWorkerInstanceGetFunctionIterator(d),w=function(a,f){return new Promise(function(g,e){a=l(a);var b=a.docId,b=b?Module.GetDoc(b):0;(b=Module.EMSCallSharedFunction(d,f,b))?e({type:"InvalidPDF",message:Module.GetErrToString(b)}):(b=Module.EMSGetLastResponse(d),b=c(b),g(b))})};f=Module._TRN_EMSFunctionIteratorGetNextCommandName(k);)f=Module.GetJSStringFromCString(f),a.queue.onAsync(f,w);Module._TRN_EMSFunctionIteratorDestroy(k);
if(Module._TRN_EMSCreatePDFNetWorkerInstance){var m={},k=function(a,c){g.on(a,c);m[a]=!0};Module.docPtrStringToIdMap={};var u=function(a){if(a in Module.docPtrStringToIdMap)return Module.docPtrStringToIdMap[a];throw Error("Couldn't find document "+a);};a.queue.onAsync("PDFDoc.RequirePage",function(a,c){return Module.RequirePage(u(a.docId),a.pageNum)});k("pdfDocCreateFromBuffer",function(a){a=Module.CreateDoc({type:"array",value:a.buf});var c=Module.GetDoc(a).toString(16);Module.docPtrStringToIdMap[c]=
a;return c});k("PDFDoc.destroy",function(a){a=u(a.auto_dealloc_obj);Module.DeleteDoc(a)});k("PDFDoc.saveMemoryBuffer",function(a){var c=u(a.doc);return Module.SaveHelper(Module.GetDoc(c),c,a.flags).slice(0)});k("pdfDocCreate",function(a){a=Module.CreateDoc({type:"new"});var c=Module.GetDoc(a).toString(16);Module.docPtrStringToIdMap[c]=a;return c});k("GetPDFDoc",function(a){a=a.docId;var c=Module.GetDoc(a).toString(16);Module.docPtrStringToIdMap[c]=a;return c});k("ExtractPDFNetLayersContext",function(a){var c=
a.layers;a=Module.GetDoc(a.docId);var d=0;c?d=Module.EMSCreateUpdatedLayersContext(a,c):Module.PDFDocHasOC(a)&&(c=Module.PDFDocGetOCGConfig(a),d=Module.OCGContextCreate(c));return d.toString(16)});for(var t=Module._TRN_EMSCreatePDFNetWorkerInstance(),k=Module._TRN_EMSWorkerInstanceGetFunctionIterator(t),w=function(a){return new Promise(function(d,f){a=l(a);var e=Module.EMSCallPDFNetFunction(t,a);e?f(Module.GetErrToString(e)):(e=Module.EMSGetLastResponse(t),e=c(e),d(e))})};f=Module._TRN_EMSFunctionIteratorGetNextCommandName(k);)if(f=
Module.GetJSStringFromCString(f),!m[f])g.onAsync(f,w);Module._TRN_EMSFunctionIteratorDestroy(k)}}})("undefined"===typeof self?this:self);(function(a){function g(a){return new Promise(function(d,f){var g=indexedDB.open("wasm-cache",a);g.onerror=f.bind(null,"Error opening wasm cache database");g.onsuccess=function(){d(g.result)};g.onupgradeneeded=function(a){var c=g.result;c.objectStoreNames.contains("wasm-cache")&&(console.log("Clearing out version "+a.oldVersion+" wasm cache"),c.deleteObjectStore("wasm-cache"));console.log("Creating version "+a.newVersion+" wasm cache");c.createObjectStore("wasm-cache")}})}function l(a,d){return new Promise(function(f,
g){var l=a.transaction(["wasm-cache"]).objectStore("wasm-cache").get(d);l.onsuccess=function(a){l.result?f(l.result):g("Module "+d+" was not found in wasm cache")};l.onerror=g.bind(null,"Error getting wasm module "+d)})}a.isWasmCached=function(a,d){return g(a).then(function(a){return l(a,d).then(function(){return!0})})["catch"](function(){return!1})};a.instantiateCachedURL=function(c,d,f,k){function w(a,c){var f=a.transaction(["wasm-cache"],"readwrite").objectStore("wasm-cache").put(c,d);f.onerror=
function(a){console.log("Failed to store in wasm cache: "+a)};f.onsuccess=function(a){console.log("Successfully stored "+d+" in wasm cache")}}function m(c){u=u||Date.now();return c?fetch(a.getBrotliUrl(d)).then(function(a){return WebAssembly.instantiateStreaming(a,f)})["catch"](function(a){return m(!1)}):a.loadURLWithBrotliPriority(d,k,!0,!0).then(function(a){Date.now();return WebAssembly.instantiate(a,f)})}var u;return g(c).then(function(a){return l(a,d).then(function(a){return WebAssembly.instantiate(a,
f)},function(c){return m(!!WebAssembly.instantiateStreaming).then(function(c){try{w(a,c.module)}catch(d){}return c.instance})})},function(a){console.log(a);return m().then(function(a){return a.instance})})}})(this);(function(a){function g(a,b){return fetch(a).then(function(a){console.log("Pos 1");if(200!==a.status)throw Error("Response failed with code "+a.status);console.log("Pos 2");console.log(a);console.log("Pos 2a");var c=!1,h=new ReadableStream({start:function(h){function d(){if(!c)return console.log("Pos 4"),f.read().then(function(a){c=a.done;a=a.value;c?(console.log("Done"),(a=b.End())?h.enqueue(a):h.close()):(a=b.GetNextChunk(a),console.log("Enqueue"),a&&h.enqueue(a))}).then(d)}console.log("Pos 3");
var e=a.body;console.log("Pos 3z"+e);var f=e.getReader();d()}});console.log("Pos 2b");return new Response(h,{headers:{"content-type":"application/wasm"}})})}var l=function(a){if("string"===typeof a){for(var b=new Uint8Array(a.length),c=a.length,d=0;d<c;d++)b[d]=a.charCodeAt(d);return b}return a},c=function(a){if("string"!==typeof a){for(var b="",c=0,d=a.length,e;c<d;)e=a.subarray(c,c+1024),c+=1024,b+=String.fromCharCode.apply(null,e);return b}return a},d=!1,f=function(b,e){d||(importScripts(a.basePath+
"decode.min.js"),d=!0);var f=self.BrotliDecode(l(b));return e?f:c(f)},k=function(){this.remainingDataArrays=[]};k.prototype={processRaw:function(a){return a},processBrotli:function(a){this.remainingDataArrays.push(a);return null},GetNextChunk:function(a){this.decodeFunction||(this.decodeFunction=0===a[0]&&97===a[1]&&115===a[2]&&109===a[3]?this.processRaw:this.processBrotli);return this.decodeFunction(a)},End:function(){if(this.remainingDataArrays.length){for(var a=this.arrays,b=0,c=0;c<a.length;++c)b+=
a[c].length;for(var b=new Uint8Array(b),d=0,c=0;c<a.length;++c){var e=a[c];b.set(e,d);d+=e.length}return f(b,!0)}return null}};var w=!1,m=function(b,d){w||(importScripts(a.basePath+"rawinflate.js",a.basePath+"pako_inflate.min.js"),w=!0);var e=10;if("string"===typeof b){if(b.charCodeAt(3)&8){for(;0!==b.charCodeAt(e);++e);++e}}else if(b[3]&8){for(;0!==b[e];++e);++e}if(d)return b=l(b),b=b.subarray(e,b.length-8),a.pako.inflate(b,{windowBits:-15});b=c(b);b=b.substring(e,b.length-8);return a.RawDeflate.inflate(b)},
u=function(a,b){return b?a:c(a)},t=function(a){var b=!a.shouldOutputArray,d=new XMLHttpRequest;d.open("GET",a.url,a.isAsync);var e=b&&d.overrideMimeType;d.responseType=e?"text":"arraybuffer";e&&d.overrideMimeType("text/plain; charset=x-user-defined");d.send();var f=function(){Date.now();var f;f=e?d.responseText:new Uint8Array(d.response);f.length<a.compressedMaximum?(f=a.decompressFunction(f,a.shouldOutputArray),console.warn("There may be some degradation of performance. Your server has not been configured to serve .gz. and .br. files with the expected Content-Encoding. See http://www.pdftron.com/kb_content_encoding for instructions on how to resolve this.")):
b&&(f=c(f));return f},g;if(a.isAsync)g=new Promise(function(b,c){d.onload=function(){200===this.status?b(f()):c("Download Failed "+a.url)};d.onerror=function(){c("Network error occurred "+a.url)}});else{if(200===d.status)return f();throw Error("Failed to load "+a.url);}return g},v=function(a){var b=a.lastIndexOf("/");-1===b&&(b=0);var c=a.slice(b).replace(".",".br.");return a.slice(0,b)+c},p=function(a,b){var c=a.lastIndexOf("/");-1===c&&(c=0);var d=a.slice(c).replace(".",".gz.");b.url=a.slice(0,
c)+d;b.decompressFunction=m;return t(b)},q=function(a,b){b.url=v(a);b.decompressFunction=f;return t(b)},e=function(a,b){b.url=a;b.decompressFunction=u;return t(b)},b=function(a,b,c,d){return a["catch"](function(a){console.warn(a);return d(b,c)})},r=function(a,c,d){var e;if(d.isAsync){var f=c[0](a,d);for(e=1;e<c.length;++e)f=b(f,a,d,c[e]);return f}for(e=0;e<c.length;++e)try{return c[e](a,d)}catch(g){console.warn(g.message)}throw Error("");};a.getBrotliUrl=v;a.loadURLWithBrotliPriority=function(a,b,
c,d){var f={};f.compressedMaximum=b;f.isAsync=c;f.shouldOutputArray=d;return r(a,[q,p,e],f)};a.loadURLWithGzipPriority=function(a,b,c,d){var f={};f.compressedMaximum=b;f.isAsync=c;f.shouldOutputArray=d;return r(a,[p,q,e],f)};a.loadWasmBrotliStream=function(a){return g(a,new k)}})("undefined"===typeof window?this:window);(function(a){a.Uint8ClampedArray||(a.Uint8ClampedArray=a.Uint8Array);"undefined"===typeof a.crypto&&(a.crypto={getRandomValues:function(a){for(var c=0;c<a.length;c++)a[c]=256*Math.random()}});var g=!(!self.WebAssembly||!self.WebAssembly.validate),l=/^((?!chrome|android).)*safari/i.test(a.navigator.userAgent),c=/Mac OS X 10_13_6.*\(KHTML, like Gecko\)$/.test(a.navigator.userAgent),d=-1<a.navigator.userAgent.indexOf("Edge/16")||-1<a.navigator.userAgent.indexOf("MSAppHost"),f=function(a){var c=this;
this.promise=a.then(function(a){c.response=a;c.status=200})};f.prototype={addEventListener:function(a,c){this.promise.then(c)}};a.loadCompiledBackend=function(k,w,m){if(!g||m||d||l||c){m=loadURLWithGzipPriority((Module.asmjsPrefix?Module.asmjsPrefix:"")+k+".js.mem",w[".js.mem"],!1);var u=loadURLWithGzipPriority((Module.memoryInitializerPrefixURL?Module.memoryInitializerPrefixURL:"")+k+".mem",w[".mem"],!0,!0);Module.memoryInitializerRequest=new f(u)}else Module.instantiateWasm=function(c,d){return self.instantiateCachedURL(a.getWasmVersion(),
k+"Wasm.wasm",c,w["Wasm.wasm"]).then(function(a){d(a)})},m=loadURLWithBrotliPriority(k+"Wasm.js.mem",w["Wasm.js.mem"],!1,!1);m=new Blob([m],{type:"application/javascript"});importScripts(URL.createObjectURL(m))}})("undefined"===typeof window?this:window);(function(a){function g(a){var d={};decodeURIComponent(a.slice(1)).split("&").forEach(function(a){a=a.split("=",2);d[a[0]]=a[1]});return d}a.basePath="../";var l=function(){var c=a.pdfWorkerPath||"";a.workerBasePath&&(a.basePath=a.workerBasePath);var d=g(a.location.search),f="true"===d.isfull,k=f?"full/":"lean/";if(d.pdfWorkerPath){c=d.pdfWorkerPath;a.basePath="../";var l=!(!self.WebAssembly||!self.WebAssembly.validate),m=/^((?!chrome|android).)*safari/i.test(a.navigator.userAgent),u=/Mac OS X 10_13_6.*\(KHTML, like Gecko\)$/.test(a.navigator.userAgent);
if(!l||m||u)c=""}a.basePath=d.externalPath?d.externalPath:a.basePath+"external/";a.loadCompiledBackend(c+k+"PDFNetC",{"Wasm.wasm":4E6,"Wasm.js.mem":1E5,".js.mem":6E6,".mem":f?2E6:3E5})};self.shouldResize||l();a.EmscriptenPDFManager=function(){};a.EmscriptenPDFManager.prototype={OnInitialized:function(c){Module.loaded?c():(Module.initCb=function(){c()},a.utils.log("worker","PDFNet is not initialized yet!"))},NewDoc:function(a,d){return new Promise(function(f,g){try{f(Module.loadDoc(a,d))}catch(l){g(l)}})},
Initialize:function(c,d,f,g){c&&(Module.TOTAL_MEMORY=c);Module.memoryInitializerPrefixURL=d;Module.asmjsPrefix=f;a.basePath=g;l()},shouldRunRender:function(a){return Module.ShouldRunRender(a.docId,a.pageIndex+1)}};(function(c){function d(b){var c=b.data,d=b.action,e;e="GetCanvas"===d||"GetCanvasPartial"===d?m.shouldRunRender(c):!0;if(e){q=b;var f=b.asyncCallCapability;a.utils.log("Memory","Worker running command: "+d);u.actionMap[d](c,b).then(function(a){f.resolve(a)},function(a){f.reject(a)})}else a.deferredQueue.queue(b),
l()}function f(a){a.asyncCallCapability=createPromiseCapability();q?u.queue(a):d(a);return a.asyncCallCapability.promise}function g(b){self.shouldResize&&m.Initialize(b.options.workerHeapSize,b.options.pdfResourcePath,b.options.pdfAsmPath,b.options.parentUrl);Module.chunkMax=b.options.chunkMax;if(b.array instanceof Uint8Array){var d=255===b.array[0];c.postMessageTransfers=d;"response"in new XMLHttpRequest?m.OnInitialized(function(){a.SetupPDFNetFunctions(c);p();c.send("test",{supportTypedArray:!0,
supportTransfers:d})}):c.send("test",!1)}else c.send("test",!1)}function l(){setImmediate(function(){if(!q||"BeginOperation"!==q.action)if(u.length){if(!q||q.priority!==r){var a=u.dequeue();d(a)}}else q=null})}var m=new a.EmscriptenPDFManager,u,t=!1,v=!1;Module.workerMessageHandler=c;var p=function(){t?v||(c.send("workerLoaded",{}),v=!0):t=!0};m.OnInitialized(p);(function(){a.queue=u=new PriorityQueue({strategy:PriorityQueue.ArrayStrategy,comparator:function(a,b){return a.priority===b.priority?a.callbackId-
b.callbackId:b.priority-a.priority}});a.deferredQueue=new PriorityQueue({strategy:PriorityQueue.ArrayStrategy,comparator:function(a,b){return a.priority===b.priority?a.callbackId-b.callbackId:b.priority-a.priority}});u.actionMap={};u.onAsync=function(a,b){c.onAsync(a,f);u.actionMap[a]=b}})();var q=null;c.on("test",g);c.on("InitWorker",g);var e=function(a){q&&a(q)&&(Module.cancelCurrent(),q=null);u.removeAllMatching(a,function(a){a.asyncCallCapability.reject({type:"Cancelled",message:"Operation was cancelled due to document deletion."})})},
b=function(a){e(function(b){return b.data&&b.data.docId===a})};c.on("UpdatePassword",function(a){return Module.UpdatePassword(a.docId,a.password)});c.on("LoadRes",function(a){Module.loadResources(a.array,a.l);return{}});c.on("DownloaderHint",function(a){Module.DownloaderHint(a.docId,a.hint)});c.on("IsLinearized",function(a){return Module.IsLinearizationValid(a.docId)});c.onNextAsync(l);u.onAsync("NewDoc",function(a){return m.NewDoc(a)});u.onAsync("GetCanvas",function(b){a.utils.log("workerdetails",
"Run GetCanvas PageIdx: "+b.pageIndex+" Width: "+b.width);a.utils.log("Memory","loadCanvas with potential memory usage "+b.width*b.height*8);return Module.loadCanvas(b.docId,b.pageIndex,b.width,b.height,b.rotation,null,b.layers,b.overprintMode)});u.onAsync("GetCanvasPartial",function(b){a.utils.log("Memory","GetCanvasPartial with potential memory usage "+b.width*b.height*8);return Module.loadCanvas(b.docId,b.pageIndex,b.width,b.height,b.rotation,b.bbox,b.layers,b.overprintMode)});u.onAsync("LoadText",
function(a){return Module.GetTextData(a.docId,a.pageIndex)});u.onAsync("SaveDoc",function(a){return Module.SaveDoc(a.docId,a.xfdfString,a.finishedWithDocument,a.printDocument,a.flags,a.watermarks)});u.onAsync("SaveDocFromFixedElements",function(a){return Module.SaveDocFromFixedElements(a.bytes,a.xfdfString,a.flags,a.watermarks)});u.onAsync("MergeXFDF",function(a){return Module.MergeXFDF(a.docId,a.xfdf)});u.onAsync("InsertPages",function(a){return Module.InsertPages(a.docId,a.doc,a.pageArray,a.destPos,
a.insertBookmarks)});u.onAsync("MovePages",function(a){return Module.MovePages(a.docId,a.pageArray,a.destPos)});u.onAsync("RemovePages",function(a){return Module.RemovePages(a.docId,a.pageArray)});u.onAsync("RotatePages",function(a){return Module.RotatePages(a.docId,a.pageArray,a.rotation)});u.onAsync("ExtractPages",function(a){return Module.ExtractPages(a.docId,a.pageArray,a.xfdfString,a.watermarks)});u.onAsync("CropPages",function(a){return Module.CropPages(a.docId,a.pageArray,a.topMargin,a.botMargin,
a.leftMargin,a.rightMargin)});u.onAsync("InsertBlankPages",function(a){return Module.InsertBlankPages(a.docId,a.pageArray,a.width,a.height)});u.onAsync("BeginOperation",function(){return Promise.resolve()});u.onAsync("RequirePage",function(a,b){return Module.RequirePage(a.docId,a.pageNum)});var r=99999;c.on("FinishOperation",function(){if("BeginOperation"===q.action)c.onNextAsync(l),Module.cancelCurrent(),q=null;else throw{message:"Operation has not started."};});c.on("DeleteDocument",function(a){a=
a.docId;b(a);Module.DeleteDoc(a)});c.on("LoadBookmarks",function(a){return Module.LoadBookmarks(a.docId)});c.on("GetCanvasProgressive",function(b){var c;if(q&&q.callbackId===b.callbackId)a.utils.log("worker","Progressive request in progress"),c=Module.GetCurrentCanvasData(!0);else{if(u.find({priority:0,callbackId:b.callbackId}))throw a.utils.log("worker","Progressive request Queued"),{type:"Queued",message:"Rendering has not started yet."};if(a.deferredQueue.find({priority:0,callbackId:b.callbackId}))throw a.utils.log("worker",
"Progressive request Deferred"),{type:"Queued",message:"Rendering has not started yet."};}if(!c)throw a.utils.log("worker","Progressive request invalid (render already complete)"),{type:"Unavailable",message:"Rendering is complete or was cancelled."};return c});c.on("actionCancel",function(b){q&&q.callbackId===b.callbackId?(a.utils.log("workerdetails","Cancelled Current Operation"),Module.cancelCurrent()&&l()):(a.utils.log("workerdetails","Cancelled queued operation"),u.remove({priority:0,callbackId:b.callbackId}),
a.deferredQueue.remove({priority:0,callbackId:b.callbackId}))})})(new MessageHandler("worker_processor",self))})("undefined"===typeof window?this:window);
